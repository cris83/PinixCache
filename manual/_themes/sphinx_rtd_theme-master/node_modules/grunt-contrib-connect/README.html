

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>} &mdash; PINIX Cache Docs 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PINIX Cache Docs 1.0 documentation" href="../../../../index.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> PINIX Cache Docs
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Global.html">Global</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Origin.html">Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../VHost.html">VHost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../VHost-Proxy.html">Virtual Host Proxy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">PINIX Cache Docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
    <li>}</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/_themes/sphinx_rtd_theme-master/node_modules/grunt-contrib-connect/README.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># grunt-contrib-connect v0.7.1 [![Build Status](<a class="reference external" href="https://travis-ci.org/gruntjs/grunt-contrib-connect.png?branch=master)](https://travis-ci.org/gruntjs/grunt-contrib-connect">https://travis-ci.org/gruntjs/grunt-contrib-connect.png?branch=master)](https://travis-ci.org/gruntjs/grunt-contrib-connect</a>)</p>
<p>&gt; Start a connect web server.</p>
<p>## Getting Started
This plugin requires Grunt <cite>~0.4.0</cite></p>
<p>If you haven&#8217;t used [Grunt](<a class="reference external" href="http://gruntjs.com/">http://gruntjs.com/</a>) before, be sure to check out the [Getting Started](<a class="reference external" href="http://gruntjs.com/getting-started">http://gruntjs.com/getting-started</a>) guide, as it explains how to create a [Gruntfile](<a class="reference external" href="http://gruntjs.com/sample-gruntfile">http://gruntjs.com/sample-gruntfile</a>) as well as install and use Grunt plugins. Once you&#8217;re familiar with that process, you may install this plugin with this command:</p>
<p><code class="docutils literal"><span class="pre">`shell</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">grunt-contrib-connect</span> <span class="pre">--save-dev</span>
<span class="pre">`</span></code></p>
<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>
<p><code class="docutils literal"><span class="pre">`js</span>
<span class="pre">grunt.loadNpmTasks('grunt-contrib-connect');</span>
<span class="pre">`</span></code></p>
<p>## Connect task
_Run this task with the <cite>grunt connect</cite> command._</p>
<p>Note that this server only runs as long as grunt is running. Once grunt&#8217;s tasks have completed, the web server stops. This behavior can be changed with the [keepalive](#keepalive) option, and can be enabled ad-hoc by running the task like <cite>grunt connect:keepalive</cite>.</p>
<p>This task was designed to be used in conjunction with another task that is run immediately afterwards, like the [grunt-contrib-qunit plugin](<a class="reference external" href="https://github.com/gruntjs/grunt-contrib-qunit">https://github.com/gruntjs/grunt-contrib-qunit</a>) <cite>qunit</cite> task.
### Options</p>
<p>#### port
Type: <cite>Integer</cite>
Default: <cite>8000</cite></p>
<p>The port on which the webserver will respond. The task will fail if the specified port is already in use. You can use the special values <cite>0</cite> or <cite>&#8216;?&#8217;</cite> to use a system-assigned port.</p>
<p>#### protocol
Type: <cite>String</cite>
Default: <cite>&#8216;http&#8217;</cite></p>
<p>May be <cite>&#8216;http&#8217;</cite> or <cite>&#8216;https&#8217;</cite>.</p>
<p>#### hostname
Type: <cite>String</cite>
Default: <cite>&#8216;0.0.0.0&#8217;</cite></p>
<p>The hostname the webserver will use.</p>
<p>Setting it to <cite>&#8216;*&#8217;</cite> will make the server accessible from anywhere.</p>
<p>#### base
Type: <cite>String</cite> or <cite>Array</cite>
Default: <cite>&#8216;.&#8217;</cite></p>
<p>The base (or root) directory from which files will be served. Defaults to the project Gruntfile&#8217;s directory.</p>
<p>Can be an array of bases to serve multiple directories. The last base given will be the directory to become browse-able.</p>
<p>#### directory
Type: <cite>String</cite>
Default: <cite>null</cite></p>
<p>Set to the directory you wish to be browse-able. Used to override the <cite>base</cite> option browse-able directory.</p>
<p>#### keepalive
Type: <cite>Boolean</cite>
Default: <cite>false</cite></p>
<p>Keep the server alive indefinitely. Note that if this option is enabled, any tasks specified after this task will _never <a href="#id56"><span class="problematic" id="id57">run_</span></a>. By default, once grunt&#8217;s tasks have completed, the web server stops. This option changes that behavior.</p>
<p>This option can also be enabled ad-hoc by running the task like <cite>grunt connect:targetname:keepalive</cite></p>
<p>#### debug
Type: <cite>Boolean</cite>
Default: <cite>false</cite></p>
<p>Set the <cite>debug</cite> option to true to enable logging instead of using the <cite>&#8211;debug</cite> flag.</p>
<p>#### livereload
Type: <cite>Boolean</cite> or <cite>Number</cite>
Default: <cite>false</cite></p>
<p>Set to <cite>true</cite> or a port number to inject a live reload script tag into your page using [connect-livereload](<a class="reference external" href="https://github.com/intesso/connect-livereload">https://github.com/intesso/connect-livereload</a>).</p>
<p><em>This does not perform live reloading. It is intended to be used in tandem with grunt-contrib-watch or another task that will trigger a live reload server upon files changing.</em></p>
<p>#### open
Type: <cite>Boolean</cite> or <cite>String</cite> or <cite>Object</cite>
Default: <cite>false</cite></p>
<p>Open the served page in your default browser. Specifying <cite>true</cite> opens the default server URL, specifying a URL opens that URL or specify an object with the following keys to configure open directly (each are optional):</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>js
{</p>
<blockquote>
<div>target: &#8216;<a class="reference external" href="http://localhost:8000">http://localhost:8000</a>&#8216;, // target url to open
appName: &#8216;open&#8217;, // name of the app that opens, ie: open, start, xdg-open
callback: function() {} // called when the app has opened</div></blockquote>
<div class="section" id="id5">
<h1>}<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>#### useAvailablePort</dt>
<dd>Type: <cite>Boolean</cite>
Default: <cite>false</cite></dd>
</dl>
<p>If <cite>true</cite> the task will look for the next available port after the set <cite>port</cite> option.
This also applies to <cite>livereload</cite>.</p>
<p>#### middleware
Type: <cite>Function</cite> or <cite>Array</cite>
Default: <cite>Array</cite> of connect middlewares that use <cite>options.base</cite> for static files and directory browsing</p>
<p>As an <cite>Array</cite>:</p>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>connect: {</dt>
<dd><dl class="first docutils">
<dt>server: {</dt>
<dd><dl class="first docutils">
<dt>options: {</dt>
<dd><dl class="first docutils">
<dt>middleware: [</dt>
<dd><dl class="first docutils">
<dt>function myMiddleware(req, res, next) {</dt>
<dd>res.end(&#8216;Hello, world!&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p class="last">],</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id10">
<h1>});<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h1>
<p>As a <cite>function</cite>:</p>
<p><a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id13"><span class="problematic" id="id14">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>connect: {</dt>
<dd><dl class="first docutils">
<dt>server: {</dt>
<dd><dl class="first docutils">
<dt>options: {</dt>
<dd><dl class="first docutils">
<dt>middleware: function(connect, options, middlewares) {</dt>
<dd><p class="first">// inject a custom middleware into the array of default middlewares
middlewares.push(function(req, res, next) {</p>
<blockquote>
<div><p>if (req.url !== &#8216;/hello/world&#8217;) return next();</p>
<p>res.end(&#8216;Hello, world from port #&#8217; + options.port + &#8216;!&#8217;);</p>
</div></blockquote>
<p>});</p>
<p class="last">return middlewares;</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id15">
<h1>});<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h1>
<p>Lets you add in your own Connect middlewares. This option expects a function that returns an array of middlewares. See the [project Gruntfile][] and [project unit tests][] for a usage example.</p>
<p>[project Gruntfile]: Gruntfile.js
[project unit tests]: test/connect_test.js</p>
<p>### Usage examples</p>
<p>#### Basic Use
In this example, <cite>grunt connect</cite> (or more verbosely, <cite>grunt connect:server</cite>) will start a static web server at <cite>http://localhost:9001/</cite>, with its base path set to the <cite>www-root</cite> directory relative to the gruntfile, and any tasks run afterwards will be able to access it.</p>
<p><a href="#id16"><span class="problematic" id="id17">``</span></a><a href="#id18"><span class="problematic" id="id19">`</span></a>javascript
// Project configuration.
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>connect: {</dt>
<dd><dl class="first docutils">
<dt>server: {</dt>
<dd><dl class="first docutils">
<dt>options: {</dt>
<dd>port: 9001,
base: &#8216;www-root&#8217;</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id20">
<h1>});<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h1>
<p>If you want your web server to use the default options, just omit the <cite>options</cite> object. You still need to specify a target (<cite>uses_defaults</cite> in this example), but the target&#8217;s configuration object can otherwise be empty or nonexistent. In this example, <cite>grunt connect</cite> (or more verbosely, <cite>grunt connect:uses_defaults</cite>) will start a static web server using the default options.</p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a>javascript
// Project configuration.
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>connect: {</dt>
<dd>uses_defaults: {}</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id25">
<h1>});<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h1>
<p>#### Multiple Servers
You can specify multiple servers to be run alone or simultaneously by creating a target for each server. In this example, running either <cite>grunt connect:site1</cite> or <cite>grunt connect:site2</cite> will  start the appropriate web server, but running <cite>grunt connect</cite> will run _both_. Note that any server for which the [keepalive](#keepalive) option is specified will prevent _any_ task or target from running after it.</p>
<p><a href="#id26"><span class="problematic" id="id27">``</span></a><a href="#id28"><span class="problematic" id="id29">`</span></a>javascript
// Project configuration.
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>connect: {</dt>
<dd><dl class="first docutils">
<dt>site1: {</dt>
<dd><dl class="first docutils">
<dt>options: {</dt>
<dd>port: 9000,
base: &#8216;www-roots/site1&#8217;</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>},
site2: {</p>
<blockquote>
<div><dl class="docutils">
<dt>options: {</dt>
<dd>port: 9001,
base: &#8216;www-roots/site2&#8217;</dd>
</dl>
<p>}</p>
</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id30">
<h1>});<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h1>
<p>#### Roll Your Own
Like the [Basic Use](#basic-use) example, this example will start a static web server at <cite>http://localhost:9001/</cite>, with its base path set to the <cite>www-root</cite> directory relative to the gruntfile. Unlike the other example, this is done by creating a brand new task. in fact, this plugin isn&#8217;t even installed!</p>
<p><a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a>javascript
// Project configuration.
grunt.initConfig({ /* Nothing needed here! <a href="#id35"><span class="problematic" id="id36">*</span></a>/ });</p>
<p>// After running &#8220;npm install connect &#8211;save-dev&#8221; to add connect as a dev
// dependency of your project, you can require it in your gruntfile with:
var connect = require(&#8216;connect&#8217;);</p>
<p>// Now you can define a &#8220;connect&#8221; task that starts a webserver, using the
// connect lib, with whatever options and configuration you need:
grunt.registerTask(&#8216;connect&#8217;, &#8216;Start a custom static web server.&#8217;, function() {</p>
<blockquote>
<div>grunt.log.writeln(&#8216;Starting static web server in &#8220;www-root&#8221; on port 9001.&#8217;);
connect(connect.static(&#8216;www-root&#8217;)).listen(9001);</div></blockquote>
</div>
<div class="section" id="id37">
<h1>});<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h1>
<p>#### Support for HTTPS</p>
<p>A default certificate authority, certificate and key file are provided and pre-
configured for use when <cite>protocol</cite> has been set to <cite>https</cite>.</p>
<p>NOTE: No passphrase set for the certificate.
If you are getting warnings in Google Chrome, add &#8216;server.crt&#8217; (from &#8216;node_modules/tasks/certs&#8217;)
to your keychain.
In OS X, after you add &#8216;server.crt&#8217;, right click on the certificate,
select &#8216;Get Info&#8217; - &#8216;Trust&#8217; - &#8216;Always Trust&#8217;, close window, restart Chrome.</p>
<p>###### Advanced HTTPS config</p>
<p>If the default certificate setup is unsuitable for your environment, OpenSSL
can be used to create a set of self-signed certificates with a local ca root.</p>
<p><a href="#id38"><span class="problematic" id="id39">``</span></a><a href="#id40"><span class="problematic" id="id41">`</span></a>shell
### Create ca.key, use a password phrase when asked
### When asked &#8216;Common Name (e.g. server FQDN or YOUR name) []:&#8217; use your hostname, i.e &#8216;mysite.dev&#8217;
openssl genrsa -des3 -out ca.key 1024
openssl req -new -key ca.key -out ca.csr
openssl x509 -req -days 365 -in ca.csr -out ca.crt -signkey ca.key</p>
<p>### Create server certificate
openssl genrsa -des3 -out server.key 1024
openssl req -new -key server.key -out server.csr</p>
<p>### Remove password from the certificate
cp server.key server.key.org
openssl rsa -in server.key.org -out server.key</p>
<p>### Generate self-siged certificate
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
<a href="#id42"><span class="problematic" id="id43">``</span></a><a href="#id44"><span class="problematic" id="id45">`</span></a></p>
<p>For more details on the various options that can be set when configuring SSL,
please see the Node documentation for [TLS][].</p>
<p>Grunt configuration would become</p>
<p><a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a>javascript
// Project configuration.
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>connect: {</dt>
<dd><dl class="first docutils">
<dt>server: {</dt>
<dd><dl class="first docutils">
<dt>options: {</dt>
<dd>protocol: &#8216;https&#8217;,
port: 8443,
key: grunt.file.read(&#8216;server.key&#8217;).toString(),
cert: grunt.file.read(&#8216;server.crt&#8217;).toString(),
ca: grunt.file.read(&#8216;ca.crt&#8217;).toString()</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id50">
<h1>});<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h1>
<p>[TLS]: <a class="reference external" href="http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener">http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener</a></p>
<p>#### Grunt Events
The connect plugin will emit a grunt event, <cite>connect.{taskName}.listening</cite>, once the server has started. You can listen for this event to run things against a keepalive server, for example:</p>
<p><a href="#id51"><span class="problematic" id="id52">``</span></a><a href="#id53"><span class="problematic" id="id54">`</span></a>javascript
grunt.registerTask(&#8216;jasmine-server&#8217;, &#8216;start web server for jasmine tests in browser&#8217;, function() {</p>
<blockquote>
<div><p>grunt.task.run(&#8216;jasmine:tests:build&#8217;);</p>
<dl class="docutils">
<dt>grunt.event.once(&#8216;connect.tests.listening&#8217;, function(host, port) {</dt>
<dd>var specRunnerUrl = &#8216;<a class="reference external" href="http://">http://</a>&#8216; + host + &#8216;:&#8217; + port + &#8216;/_SpecRunner.html&#8217;;
grunt.log.writeln(&#8216;Jasmine specs available at: &#8216; + specRunnerUrl);
require(&#8216;open&#8217;)(specRunnerUrl);</dd>
</dl>
<p>});</p>
<p>grunt.task.run(&#8216;connect:tests:keepalive&#8217;);</p>
</div></blockquote>
</div>
<div class="section" id="id55">
<h1>});<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h1>
<p>## Release History</p>
<blockquote>
<div><ul class="simple">
<li>2014-02-27   v0.7.1   Fixes issue with the &#8216;*&#8217; hostname option.</li>
<li>2014-02-18   v0.7.0   Update connect to ~2.13.0. Default hostname switched to &#8216;0.0.0.0&#8217;. Modified options.middleware to accept an array or a function.</li>
<li>2013-12-29   v0.6.0   Open options.hostname if provided. Update connect-livereload to ~0.3.0. Update connect to ~2.12.0. Use well-formed ssl certificates. Support all options of open. Make directory browseable when base is a string.</li>
<li>2013-09-05   v0.5.0   Add &#8216;open&#8217; option.</li>
<li>2013-09-05   v0.4.2   Un-normalize options.base as it should be a string or an array as the user has set. Fix setting target hostname option.</li>
<li>2013-09-02   v0.4.1   Browse-able directory is the last item supplied to bases. Added directory option to override browse-able directory.</li>
<li>2013-09-01   v0.4.0   Fix logging of which server address. Ability to set multiple bases. Event emitted when server starts listening. Support for HTTPS. debug option added to display debug logging like the &#8211;debug flag. livereload option added to inject a livereload snippet into the page.</li>
<li>2013-04-10   v0.3.0   Add ability to listen on system-assigned port.</li>
<li>2013-03-07   v0.2.0   Upgrade connect dependency.</li>
<li>2013-02-17   v0.1.2   Ensure Gruntfile.js is included on npm.</li>
<li>2013-02-15   v0.1.1   First official release for Grunt 0.4.0.</li>
<li>2013-01-18   v0.1.1rc6   Updating grunt/gruntplugin dependencies to rc6. Changing in-development grunt/gruntplugin dependency versions from tilde version ranges to specific versions.</li>
<li>2013-01-09   v0.1.1rc5   Updating to work with grunt v0.4.0rc5.</li>
<li>2012-11-01   v0.1.0   Work in progress, not yet officially released.</li>
</ul>
</div></blockquote>
<p>&#8212;</p>
<p>Task submitted by [&#8220;Cowboy&#8221; Ben Alman](<a class="reference external" href="http://benalman.com">http://benalman.com</a>)</p>
<p><em>This file was generated on Thu Feb 27 2014 15:45:07.</em></p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright © NFLabs. All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>