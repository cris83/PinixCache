

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>} &mdash; PINIX Cache Docs 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PINIX Cache Docs 1.0 documentation" href="../../../../../../../../../../index.html"/> 

  
  <script src="../../../../../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../../../../../../index.html" class="icon icon-home"> PINIX Cache Docs
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../Global.html">Global</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../Origin.html">Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../VHost.html">VHost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../VHost-Proxy.html">Virtual Host Proxy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../../../../../../index.html">PINIX Cache Docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../../../../../../index.html">Docs</a> &raquo;</li>
      
    <li>}</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../../../../../../_sources/_themes/sphinx_rtd_theme-master/node_modules/grunt-contrib-nodeunit/node_modules/nodeunit/node_modules/tap/node_modules/coveralls/README.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>#node-coveralls</p>
<p>[![Build Status][travis-image]][travis-url] [![Coverage Status][coveralls-image]][coveralls-url] [![Codeship Build Status][codeship-image]][codeship-url]</p>
<p>[Coveralls.io](<a class="reference external" href="https://coveralls.io/">https://coveralls.io/</a>) support for node.js.  Get the great coverage reporting of coveralls.io and add a cool coverage button ( like the one above ) to your README.</p>
<p>Supported CI services:  [travis-ci](<a class="reference external" href="https://travis-ci.org/">https://travis-ci.org/</a>), [codeship](<a class="reference external" href="https://www.codeship.io/">https://www.codeship.io/</a>), [circleci](<a class="reference external" href="https://circleci.com/">https://circleci.com/</a>), [jenkins](<a class="reference external" href="http://jenkins-ci.org/">http://jenkins-ci.org/</a>)</p>
<p>##Installation:
Add the latest version of <cite>coveralls</cite> to your package.json:
<code class="docutils literal"><span class="pre">`</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">coveralls</span> <span class="pre">--save-dev</span>
<span class="pre">`</span></code></p>
<p>If you&#8217;re using mocha, add <cite>mocha-lcov-reporter</cite> to your package.json:
<code class="docutils literal"><span class="pre">`</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">mocha-lcov-reporter</span> <span class="pre">--save-dev</span>
<span class="pre">`</span></code></p>
<p>##Usage:</p>
<p>This script ( <cite>bin/coveralls.js</cite> ) can take standard input from any tool that emits the lcov data format (including [mocha](<a class="reference external" href="http://mochajs.org/)'s">http://mochajs.org/)&#8217;s</a> [LCov reporter](<a class="reference external" href="https://npmjs.org/package/mocha-lcov-reporter">https://npmjs.org/package/mocha-lcov-reporter</a>)) and send it to coveralls.io to report your code coverage there.</p>
<p>Once your app is instrumented for coverage, and building, you need to pipe the lcov output to <cite>./node_modules/coveralls/bin/coveralls.js</cite>.</p>
<p>This library currently supports [travis-ci](<a class="reference external" href="https://travis-ci.org/">https://travis-ci.org/</a>) with no extra effort beyond piping the lcov output to coveralls. However, if you&#8217;re using a different build system, there are a few environment variables that are necessary:
* COVERALLS_SERVICE_NAME  (the name of your build system)
* COVERALLS_REPO_TOKEN (the secret repo token from coveralls.io)</p>
<p>There are optional environment variables for other build systems as well:
* COVERALLS_SERVICE_JOB_ID  (an id that uniquely identifies the build job)
* COVERALLS_RUN_AT  (a date string for the time that the job ran.  RFC 3339 dates work.  This defaults to your
build system&#8217;s date/time if you don&#8217;t set it.)</p>
<p>### [Mocha](<a class="reference external" href="http://mochajs.org/">http://mochajs.org/</a>) + [Blanket.js](<a class="reference external" href="https://github.com/alex-seville/blanket">https://github.com/alex-seville/blanket</a>)
- Install [blanket.js](<a class="reference external" href="http://blanketjs.org/">http://blanketjs.org/</a>)
- Configure blanket according to [docs](<a class="reference external" href="https://github.com/alex-seville/blanket/blob/master/docs/getting_started_node.md">https://github.com/alex-seville/blanket/blob/master/docs/getting_started_node.md</a>).
- Run your tests with a command like this:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>sh
NODE_ENV=test YOURPACKAGE_COVERAGE=1 ./node_modules/.bin/mocha </p>
<blockquote>
<div>&#8211;require blanket &#8211;reporter mocha-lcov-reporter | ./node_modules/coveralls/bin/coveralls.js</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a>`
### [Mocha](<a class="reference external" href="http://mochajs.org/">http://mochajs.org/</a>) + [JSCoverage](<a class="reference external" href="https://github.com/fishbar/jscoverage">https://github.com/fishbar/jscoverage</a>)</p>
<p>Instrumenting your app for coverage is probably harder than it needs to be (read [here](<a class="reference external" href="http://www.seejohncode.com/2012/03/13/setting-up-mocha-jscoverage/">http://www.seejohncode.com/2012/03/13/setting-up-mocha-jscoverage/</a>)), but that&#8217;s also a necessary step.</p>
<p>In mocha, if you&#8217;ve got your code instrumented for coverage, the command for a travis build would look something like this:
<code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">YOURPACKAGE_COVERAGE=1</span> <span class="pre">./node_modules/.bin/mocha</span> <span class="pre">test</span> <span class="pre">-R</span> <span class="pre">mocha-lcov-reporter</span> <span class="pre">|</span> <span class="pre">./node_modules/coveralls/bin/coveralls.js</span>
<span class="pre">`</span></code>
Check out an example [Makefile](<a class="reference external" href="https://github.com/cainus/urlgrey/blob/master/Makefile">https://github.com/cainus/urlgrey/blob/master/Makefile</a>) from one of my projects for an example, especially the test-coveralls build target.  Note: Travis runs <cite>npm test</cite>, so whatever target you create in your Makefile must be the target that <cite>npm test</cite> runs (This is set in package.json&#8217;s &#8216;scripts&#8217; property).</p>
<p>### [Istanbul](<a class="reference external" href="https://github.com/gotwarlost/istanbul">https://github.com/gotwarlost/istanbul</a>)</p>
<p><strong>With Mocha:</strong></p>
<p><code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">istanbul</span> <span class="pre">cover</span> <span class="pre">./node_modules/mocha/bin/_mocha</span> <span class="pre">--report</span> <span class="pre">lcovonly</span> <span class="pre">--</span> <span class="pre">-R</span> <span class="pre">spec</span> <span class="pre">&amp;&amp;</span> <span class="pre">cat</span> <span class="pre">./coverage/lcov.info</span> <span class="pre">|</span> <span class="pre">./node_modules/coveralls/bin/coveralls.js</span> <span class="pre">&amp;&amp;</span> <span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">./coverage</span>
<span class="pre">`</span></code></p>
<p><strong>With Jasmine:</strong></p>
<p><code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">istanbul</span> <span class="pre">cover</span> <span class="pre">jasmine-node</span> <span class="pre">--captureExceptions</span> <span class="pre">spec/</span> <span class="pre">&amp;&amp;</span> <span class="pre">cat</span> <span class="pre">./coverage/lcov.info</span> <span class="pre">|</span> <span class="pre">./node_modules/coveralls/bin/coveralls.js</span> <span class="pre">&amp;&amp;</span> <span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">./coverage</span>
<span class="pre">`</span></code></p>
<p>### [Nodeunit](<a class="reference external" href="https://github.com/caolan/nodeunit">https://github.com/caolan/nodeunit</a>) + [JSCoverage](<a class="reference external" href="https://github.com/fishbar/jscoverage">https://github.com/fishbar/jscoverage</a>)</p>
<p>Depend on nodeunit, jscoverage and coveralls:</p>
<p><code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">nodeunit</span> <span class="pre">jscoverage</span> <span class="pre">coveralls</span> <span class="pre">--save-dev</span>
<span class="pre">`</span></code></p>
<p>Add a coveralls script to &#8220;scripts&#8221; in your <cite>package.json</cite>:</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id9"><span class="problematic" id="id10">`</span></a>javascript
&#8220;scripts&#8221;: {</p>
<blockquote>
<div>&#8220;test&#8221;: &#8220;nodeunit test&#8221;,
&#8220;coveralls&#8221;: &#8220;jscoverage lib &amp;&amp; YOURPACKAGE_COVERAGE=1 nodeunit &#8211;reporter=lcov test | coveralls&#8221;</div></blockquote>
<div class="section" id="id11">
<h1>}<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h1>
<p>Ensure your app requires instrumented code when <cite>process.env.YOURPACKAGE_COVERAGE</cite> variable is defined.</p>
<p>Run your tests with a command like this:</p>
<p><code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">npm</span> <span class="pre">run</span> <span class="pre">coveralls</span>
<span class="pre">`</span></code></p>
<p>For detailed instructions on requiring instrumented code, running on Travis and submitting to coveralls [see this guide](<a class="reference external" href="https://github.com/alanshaw/nodeunit-lcov-coveralls-example">https://github.com/alanshaw/nodeunit-lcov-coveralls-example</a>).</p>
<p>### [Poncho](<a class="reference external" href="https://github.com/deepsweet/poncho">https://github.com/deepsweet/poncho</a>)
Client-side JS code coverage using [PhantomJS](<a class="reference external" href="https://github.com/ariya/phantomjs">https://github.com/ariya/phantomjs</a>), [Mocha](<a class="reference external" href="http://mochajs.org/">http://mochajs.org/</a>) and [Blanket](<a class="reference external" href="https://github.com/alex-seville/blanket">https://github.com/alex-seville/blanket</a>):
- [Configure](<a class="reference external" href="http://visionmedia.github.io/mocha/#browser-support">http://visionmedia.github.io/mocha/#browser-support</a>) Mocha for browser
- [Mark](<a class="reference external" href="https://github.com/deepsweet/poncho#usage">https://github.com/deepsweet/poncho#usage</a>) target script(s) with <cite>data-cover</cite> html-attribute
- Run your tests with a command like this:</p>
<p><code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">./node_modules/.bin/poncho</span> <span class="pre">-R</span> <span class="pre">lcov</span> <span class="pre">test/test.html</span> <span class="pre">|</span> <span class="pre">./node_modules/coveralls/bin/coveralls.js</span>
<span class="pre">`</span></code></p>
<p>### [Lab](<a class="reference external" href="https://github.com/hapijs/lab">https://github.com/hapijs/lab</a>)
<code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">lab</span> <span class="pre">-r</span> <span class="pre">lcov</span> <span class="pre">|</span> <span class="pre">./node_modules/.bin/coveralls</span>
<span class="pre">`</span></code></p>
<p>### Command Line Parameters
Usage: coveralls.js [-v] filepath</p>
<p>#### Optional arguments:</p>
<p>-v, &#8211;verbose</p>
<p>filepath - optionally defines the base filepath of your source files.</p>
<p>## Running locally</p>
<p>If you&#8217;re running locally, you must have a <cite>.coveralls.yml</cite> file, as documented in [their documentation](<a class="reference external" href="https://coveralls.io/docs/ruby">https://coveralls.io/docs/ruby</a>), with your <cite>repo_token</cite> in it; or, you must provide a <cite>COVERALLS_REPO_TOKEN</cite> environment-variable on the command-line.</p>
<p>If you want to send commit data to coveralls, you can set the <cite>COVERALLS_GIT_COMMIT</cite> environment-variable to the commit hash you wish to reference. If you don&#8217;t want to use a hash, you can set it to <cite>HEAD</cite> to supply coveralls with the latest commit data. This requires git to be installed and executable on the current PATH.</p>
<p>[travis-image]: <a class="reference external" href="https://travis-ci.org/nickmerwin/node-coveralls.svg?branch=master">https://travis-ci.org/nickmerwin/node-coveralls.svg?branch=master</a>
[travis-url]: <a class="reference external" href="https://travis-ci.org/nickmerwin/node-coveralls">https://travis-ci.org/nickmerwin/node-coveralls</a></p>
<p>[codeship-image]: <a class="reference external" href="https://www.codeship.io/projects/de6fb440-dea9-0130-e7d9-122ca7ee39d3/status">https://www.codeship.io/projects/de6fb440-dea9-0130-e7d9-122ca7ee39d3/status</a>
[codeship-url]: <a class="reference external" href="https://www.codeship.io/projects/5622">https://www.codeship.io/projects/5622</a></p>
<p>[coveralls-image]: <a class="reference external" href="https://coveralls.io/repos/nickmerwin/node-coveralls/badge.svg?branch=master&amp;service=github">https://coveralls.io/repos/nickmerwin/node-coveralls/badge.svg?branch=master&amp;service=github</a>
[coveralls-url]: <a class="reference external" href="https://coveralls.io/github/nickmerwin/node-coveralls?branch=master">https://coveralls.io/github/nickmerwin/node-coveralls?branch=master</a></p>
<p>## Contributing</p>
<p>I generally don&#8217;t accept pull requests that are untested, or break the build, because I&#8217;d like to keep the quality high (this is a coverage tool afterall!).</p>
<p>I also don&#8217;t care for &#8220;soft-versioning&#8221; or &#8220;optimistic versioning&#8221; (dependencies that have ^, x, &gt; in them, or anything other than numbers and dots).  There have been too many problems with bad semantic versioning in dependencies, and I&#8217;d rather have a solid library than a bleeding edge one.</p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright © NFLabs. All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>