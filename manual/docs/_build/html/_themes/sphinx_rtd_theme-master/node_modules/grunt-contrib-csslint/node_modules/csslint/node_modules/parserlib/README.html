

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CSS Parser &mdash; PINIX Cache Docs 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PINIX Cache Docs 1.0 documentation" href="../../../../../../../../index.html"/> 

  
  <script src="../../../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../../../../index.html" class="icon icon-home"> PINIX Cache Docs
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../Global.html">Global</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../Origin.html">Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../VHost.html">VHost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../VHost-Proxy.html">Virtual Host Proxy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../../../../index.html">PINIX Cache Docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../../../../index.html">Docs</a> &raquo;</li>
      
    <li>CSS Parser</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../../../../_sources/_themes/sphinx_rtd_theme-master/node_modules/grunt-contrib-csslint/node_modules/csslint/node_modules/parserlib/README.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="css-parser">
<h1>CSS Parser<a class="headerlink" href="#css-parser" title="Permalink to this headline">¶</a></h1>
<p>[![build status](<a class="reference external" href="https://secure.travis-ci.org/CSSLint/parser-lib.svg)](http://travis-ci.org/CSSLint/parser-lib">https://secure.travis-ci.org/CSSLint/parser-lib.svg)](http://travis-ci.org/CSSLint/parser-lib</a>)</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The ParserLib CSS parser is a CSS3 SAX-inspired parser written in JavaScript. By default, the parser only deals with standard CSS syntax and doesn&#8217;t do validation (checking of property names and values).</p>
</div>
<div class="section" id="adding-to-your-project">
<h2>Adding to your project<a class="headerlink" href="#adding-to-your-project" title="Permalink to this headline">¶</a></h2>
<p>The CSS parser is intended for use primarily in command line JavaScript environments. The files you should use are in the <cite>build</cite> directory. Copy the files to an appropriate location for your usage.</p>
<p>### Node.js</p>
<p>To use the CSS parser in a Node.js script, include it at the beginning:
<code class="docutils literal"><span class="pre">`js</span>
<span class="pre">var</span> <span class="pre">parserlib</span> <span class="pre">=</span> <span class="pre">require(&quot;./node-parserlib&quot;);</span>
<span class="pre">`</span></code></p>
<p>### Rhino</p>
<p>To use the CSS parser in a Rhino script, include it at the beginning:
<code class="docutils literal"><span class="pre">`js</span>
<span class="pre">load(&quot;parserlib.js&quot;);</span>
<span class="pre">`</span></code></p>
<p>### HTML page</p>
<p>To use the CSS parser on an HTML page, you can either include the entire library on your page:
<code class="docutils literal"><span class="pre">`html</span>
<span class="pre">&lt;script</span> <span class="pre">src=&quot;parserlib.js&quot;&gt;&lt;/script&gt;</span>
<span class="pre">`</span></code>
Or include it as its component parts, the ParserLib core and the CSS parser:
<code class="docutils literal"><span class="pre">`html</span>
<span class="pre">&lt;script</span> <span class="pre">src=&quot;parserlib-core.js&quot;&gt;&lt;/script&gt;</span>
<span class="pre">&lt;script</span> <span class="pre">src=&quot;parserlib-css.js&quot;&gt;&lt;/script&gt;</span>
<span class="pre">`</span></code>
Note that parsing large JavaScript files may cause the browser to become unresponsive.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>You can create a new instance of the parser by using the following code:
<code class="docutils literal"><span class="pre">`js</span>
<span class="pre">var</span> <span class="pre">parser</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">parserlib.css.Parser();</span>
<span class="pre">`</span></code>
The constructor accepts an options object that specifies additional features the parser should use. The available options are:</p>
<ul class="simple">
<li><cite>starHack</cite> - set to true to treat properties with a leading asterisk as if the asterisk wasn&#8217;t there. Default is false.</li>
<li><cite>underscoreHack</cite> - set to true to treat properties with a leading underscore as if the underscore wasn&#8217;t there. Default is false.</li>
<li><cite>ieFilters</cite> - set to true to accept IE &lt; 8 style <cite>filter</cite> properties. Default is false.</li>
<li><cite>strict</cite> - set to true to disable error recovery and stop on the first syntax error. Default is false.</li>
</ul>
<p>Here&#8217;s an example with some options set:
<code class="docutils literal"><span class="pre">`js</span>
<span class="pre">var</span> <span class="pre">parser</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">parserlib.css.Parser({</span> <span class="pre">starHack:</span> <span class="pre">true,</span> <span class="pre">underscoreHack:</span> <span class="pre">true</span> <span class="pre">});</span>
<span class="pre">`</span></code>
You can then parse a string of CSS code by passing into the <cite>parse()</cite> method:
<code class="docutils literal"><span class="pre">`js</span>
<span class="pre">parser.parse(someCSSText);</span>
<span class="pre">`</span></code>
The <cite>parse()</cite> method throws an error if a non-recoverable syntax error occurs, otherwise it finishes silently. This method does not return a value nor does it build up an abstract syntax tree (AST) for you, it simply parses the CSS text and fires events at important moments along the parse.</p>
<p>Note: The <cite>parseStyleSheet()</cite> method is provided for compatibility with SAC-based APIs but does the exact same thing as <cite>parse()</cite>.</p>
</div>
<div class="section" id="understanding-syntax-units">
<h2>Understanding syntax units<a class="headerlink" href="#understanding-syntax-units" title="Permalink to this headline">¶</a></h2>
<p>The CSS parser defines several types that inherit from <cite>parserlib.util.SyntaxUnit</cite>. These types are designed to give you easy access to all relevant parts of the CSS syntax.</p>
<p>### Media Queries</p>
<p>The <cite>parserlib.css.MediaFeature</cite> type represents a specific media feature in a media query, such as <cite>(orientation:portrait)</cite> or <cite>(color)</cite>. Essentially, this type of object represents anything enclosed in parentheses in a media query. Object of this type have the following properties:</p>
<ul class="simple">
<li><cite>name</cite> - the name of the media feature such as &#8220;orientation&#8221;</li>
<li><cite>value</cite> - the value of the media feature (may be <cite>null</cite>)</li>
</ul>
<p>The <cite>parserlib.css.MediaQuery</cite> type represents all parts of a media query. Each instance has the following properties:</p>
<ul class="simple">
<li><cite>modifier</cite> - either &#8220;not&#8221; or &#8220;only&#8221;</li>
<li><cite>mediaType</cite> - the actual media type such as &#8220;print&#8221;</li>
<li><cite>features</cite> - an array of <cite>parserlib.css.MediaFeature</cite> objects</li>
</ul>
<p>For example, consider the following media query:
<code class="docutils literal"><span class="pre">`css</span>
<span class="pre">only</span> <span class="pre">screen</span> <span class="pre">and</span> <span class="pre">(max-device-width:</span> <span class="pre">768px)</span> <span class="pre">and</span> <span class="pre">(orientation:portrait)</span>
<span class="pre">`</span></code>
A corresponding object would have the following values:</p>
<ul class="simple">
<li><cite>modifier</cite> = &#8220;only&#8221;</li>
<li><cite>mediaType</cite> = &#8220;screen&#8221;</li>
<li><cite>features</cite> = array of (<a href="#id1"><span class="problematic" id="id2">`</span></a>name`=&#8221;max-device-width&#8221;, <a href="#id3"><span class="problematic" id="id4">`</span></a>value`=&#8221;768px&#8221;) and (<a href="#id5"><span class="problematic" id="id6">`</span></a>name`=&#8221;orientation&#8221;, <a href="#id7"><span class="problematic" id="id8">`</span></a>value`=&#8221;portrait&#8221;)</li>
</ul>
<p>### Properties</p>
<p>The <cite>parserlib.css.PropertyName</cite> type represents a property name. Each instance has the following properties:</p>
<ul class="simple">
<li><cite>hack</cite> - if star or underscore hacks are allowed, either &#8220;*&#8221; or &#8220;_&#8221; if present (<cite>null</cite> if not present or hacks are not allowed)</li>
</ul>
<p>When star hacks are allowed, the <cite>text</cite> property becomes the actual property name, so <cite>*width</cite> has <cite>hack</cite> equal to &#8220;*&#8221; and <cite>text</cite> equal to &#8220;width&#8221;. If no hacks are allowed, then <cite>*width</cite> causes a syntax error while <cite>_width</cite> has <cite>hack</cite> equal to <cite>null</cite> and <cite>text</cite> equal to &#8220;_width&#8221;.</p>
<p>The <cite>parserlib.css.PropertyValue</cite> type represents a property value. Since property values in CSS are complex, this type of object wraps the various parts into a single interface. Each instance has the following properties:</p>
<ul class="simple">
<li><cite>parts</cite> - array of <cite>PropertyValuePart</cite> objects</li>
</ul>
<p>The <cite>parts</cite> array always has at least one item.</p>
<p>The <cite>parserlib.css.PropertyValuePart</cite> type represents an individual part of a property value. Each instance has the following properties:</p>
<ul class="simple">
<li><cite>type</cite> - the type of value part (&#8220;unknown&#8221;, &#8220;dimension&#8221;, &#8220;percentage&#8221;, &#8220;integer&#8221;, &#8220;number&#8221;, &#8220;color&#8221;, &#8220;uri&#8221;,  &#8220;string&#8221;, &#8220;identifier&#8221; or &#8220;operator&#8221;)</li>
</ul>
<p>A part is considered any atomic piece of a property value not including white space. Consider the following:
<code class="docutils literal"><span class="pre">`css</span>
<span class="pre">font:</span> <span class="pre">1em/1.5em</span> <span class="pre">&quot;Times</span> <span class="pre">New</span> <span class="pre">Roman&quot;,</span> <span class="pre">Times,</span> <span class="pre">serif;</span>
<span class="pre">`</span></code>
The <cite>PropertyName</cite> is &#8220;font&#8221; and the <a href="#id9"><span class="problematic" id="id10">`</span></a>PropertyValue&#8217; represents everything after the colon. The parts are &#8220;1em&#8221; (dimension), &#8220;/&#8221; (operator), &#8220;1.5em&#8221; (dimension), &#8220;&#8221;Times New Roman&#8221;&#8221; (string), &#8221;,&#8221; (operator), &#8220;Times&#8221; (identifier), &#8221;,&#8221; (operator), and &#8220;serif&#8221; (identifier).</p>
<p>### Selectors</p>
<p>The <cite>parserlib.css.Selector</cite> type represents a single selector. Each instance has a <cite>parts</cite> property, which is an array of <cite>parserlib.css.SelectorPart</cite> objects, which represent atomic parts of the selector, and <cite>parserlib.css.Combinator</cite> objects, which represent combinators in the selector. Consider the following selector:
<code class="docutils literal"><span class="pre">`css</span>
<span class="pre">li.selected</span> <span class="pre">&gt;</span> <span class="pre">a:hover</span>
<span class="pre">`</span></code>
This selector has three parts: <cite>li.selected</cite>, <cite>&gt;</cite>, and <cite>a:hover</cite>. The first part is a <cite>SelectorPart</cite>, the second is a <cite>Combinator</cite>, and the third is a <cite>SelectorPart</cite>. Each <cite>SelectorPart</cite> is made up of an optional element name followed by an ID, class, attribute condition, pseudo class, and/or pseudo element.</p>
<p>Each instance of <cite>parserlib.css.SelectorPart</cite> has an <cite>elementName</cite> property, which represents the element name as a <cite>parserlib.css.SelectorSubPart</cite> object or <cite>null</cite> if there isn&#8217;t one, and a <cite>modifiers</cite> property, which is an array of <cite>parserlib.css.SelectorSubPart</cite> objects. Each <cite>SelectorSubPart</cite> object represents the smallest individual piece of a selector and has a <cite>type</cite> property indicating the type of subpart, &#8220;elementName&#8221;, &#8220;class&#8221;, &#8220;attribute&#8221;, &#8220;pseudo&#8221;, &#8220;id&#8221;, &#8220;not&#8221;. If the <cite>type</cite> is &#8220;not&#8221;, then the <cite>args</cite> property contains an array of <cite>SelectorPart</cite> arguments that were passed to <cite>not()</cite>.</p>
<p>Each instance of <cite>parserlib.css.Combinator</cite> has an additional <cite>type</cite> property that indicates the type of combinator: &#8220;descendant&#8221;, &#8220;child&#8221;, &#8220;sibling&#8221;, or &#8220;adjacent-sibling&#8221;.</p>
</div>
<div class="section" id="using-events">
<h2>Using events<a class="headerlink" href="#using-events" title="Permalink to this headline">¶</a></h2>
<p>The CSS parser fires events as it parses text. The events correspond to important parts of the parsing algorithm and are designed to provide developers with all of the information necessary to create lint checkers, ASTs, and other data structures.</p>
<p>For many events, the <cite>event</cite> object contains additional information. This additional information is most frequently in the form of a <cite>parserlib.util.SyntaxUnit</cite> object, which has three properties:</p>
<p>1. <cite>text</cite> - the string value
1. <cite>line</cite> - the line on which this token appeared
1. <cite>col</cite> - the column within the line at which this token appeared</p>
<p>The <cite>toString()</cite> method for these objects is overridden to be the same value as <cite>text</cite>, so that you can treat the object as a string for comparison and concatenation purposes.</p>
<p>You should assign your event handlers before calling the <cite>parse()</cite> method.</p>
<p>### <cite>startstylesheet</cite> and <cite>endstylesheet</cite> events</p>
<p>The <cite>startstylesheet</cite> event fires just before parsing of the CSS text begins and the <cite>endstylesheet</cite> event fires just after all of the CSS text has been parsed. There is no additional information provided for these events. Example:
<a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id13"><span class="problematic" id="id14">`</span></a>js
parser.addListener(&#8220;startstylesheet&#8221;, function(){</p>
<blockquote>
<div>console.log(&#8220;Starting to parse style sheet&#8221;);</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endstylesheet&#8221;, function(){</dt>
<dd>console.log(&#8220;Finished parsing style sheet&#8221;);</dd>
</dl>
<div class="section" id="id15">
<h3>});<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>### <cite>charset</cite> event</p>
<p>The <cite>charset</cite> event fires when the <cite>&#64;charset</cite> directive is found in a style sheet. Since <cite>&#64;charset</cite> is required to appear first in a style sheet, any other occurances cause a syntax error. The <cite>charset</cite> event provides an <cite>event</cite> object with a property called <cite>charset</cite>, which contains the name of the character set for the style sheet. Example:
<a href="#id16"><span class="problematic" id="id17">``</span></a><a href="#id18"><span class="problematic" id="id19">`</span></a>js
parser.addListener(&#8220;charset&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Character set is &#8221; + event.charset);</div></blockquote>
</div>
<div class="section" id="id20">
<h3>});<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<p>### <cite>namespace</cite> event</p>
<p>The <cite>namespace</cite> event fires when the <cite>&#64;namespace</cite> directive is found in a style sheet. The <cite>namespace</cite> event provides an <cite>event</cite> object with two properties: <cite>prefix</cite>, which is the namespace prefix, and <cite>uri</cite>, which is the namespace URI. Example:
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a>js
parser.addListener(&#8220;namespace&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Namespace with prefix=&#8221; + event.prefix + &#8221; and URI=&#8221; + event.uri);</div></blockquote>
</div>
<div class="section" id="id25">
<h3>});<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<p>### <cite>import</cite> event</p>
<p>The <cite>import</cite> event fires when the <cite>&#64;import</cite> directive is found in a style sheet. The <cite>import</cite> event provides an <cite>event</cite> object with two properties: <cite>uri</cite>, which is the URI to import, and <cite>media</cite>, which is an array of media queries for which this URI applies. The <cite>media</cite> array contains zero or more <cite>parserlib.css.MediaQuery</cite> objects. Example:
<a href="#id26"><span class="problematic" id="id27">``</span></a><a href="#id28"><span class="problematic" id="id29">`</span></a>js
parser.addListener(&#8220;import&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Importing &#8221; + event.uri + &#8221; for media types [&#8221; + event.media + &#8220;]&#8221;);</div></blockquote>
</div>
<div class="section" id="id30">
<h3>});<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<p>### <cite>startfontface</cite> and <cite>endfontface</cite> events</p>
<p>The <cite>startfontface</cite> event fires when <cite>&#64;font-face</cite> is encountered and the <cite>endfontface</cite> event fires just after the closing right brace (<cite>}</cite>) is encountered after <cite>&#64;font-face</cite>. There is no additional information available on the <cite>event</cite> object. Example:
<a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a>js
parser.addListener(&#8220;startfontface&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Starting font face&#8221;);</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endfontface&#8221;, function(event){</dt>
<dd>console.log(&#8220;Ending font face&#8221;);</dd>
</dl>
</div>
<div class="section" id="id35">
<h3>});<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<p>### <cite>startpage</cite> and <cite>endpage</cite> events</p>
<p>The <cite>startpage</cite> event fires when <cite>&#64;page</cite> is encountered and the <cite>endpage</cite> event fires just after the closing right brace (<cite>}</cite>) is encountered after <cite>&#64;page</cite>. The <cite>event</cite> object has two properties: <cite>id</cite>, which is the page ID, and <cite>pseudo</cite>, which is the page pseudo class. Example:
<a href="#id36"><span class="problematic" id="id37">``</span></a><a href="#id38"><span class="problematic" id="id39">`</span></a>js
parser.addListener(&#8220;startpage&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Starting page with ID=&#8221; + event.id + &#8221; and pseudo=&#8221; + event.pseudo);</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endpage&#8221;, function(event){</dt>
<dd>console.log(&#8220;Ending page with ID=&#8221; + event.id + &#8221; and pseudo=&#8221; + event.pseudo);</dd>
</dl>
</div>
<div class="section" id="id40">
<h3>});<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<p>### <cite>startpagemargin</cite> and <cite>endpagemargin</cite> events</p>
<p>The <cite>startpagemargin</cite> event fires when a page margin directive (such as <cite>&#64;top-left</cite>) is encountered and the <cite>endfontface</cite> event fires just after the closing right brace (<cite>}</cite>) is encountered after the page margin. The <cite>event</cite> object has a <cite>margin</cite> property, which contains the actual page margin encountered. Example:
<a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>js
parser.addListener(&#8220;startpagemargin&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Starting page margin &#8221; + event.margin);</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endpagemargin&#8221;, function(event){</dt>
<dd>console.log(&#8220;Ending page margin &#8221; + event.margin);</dd>
</dl>
</div>
<div class="section" id="id45">
<h3>});<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<p>### <cite>startmedia</cite> and <cite>endmedia</cite> events</p>
<p>The <cite>startmedia</cite> event fires when <cite>&#64;media</cite> is encountered and the <cite>endmedia</cite> event fires just after the closing right brace (<cite>}</cite>) is encountered after <cite>&#64;media</cite>. The <cite>event</cite> object has one property, <cite>media</cite>, which is an array of <cite>parserlib.css.MediaQuery</cite> objects. Example:
<a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a>js
parser.addListener(&#8220;startpagemargin&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Starting page margin &#8221; + event.margin);</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endpagemargin&#8221;, function(event){</dt>
<dd>console.log(&#8220;Ending page margin &#8221; + event.margin);</dd>
</dl>
</div>
<div class="section" id="id50">
<h3>});<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<p>### <cite>startkeyframes</cite> and <cite>endkeyframes</cite> events</p>
<p>The <cite>startkeyframes</cite> event fires when <cite>&#64;keyframes</cite> (or any vendor prefixed version) is encountered and the <cite>endkeyframes</cite> event fires just after the closing right brace (<cite>}</cite>) is encountered after <cite>&#64;keyframes</cite>. The <cite>event</cite> object has one property, <cite>name</cite>, which is the name of the animation. Example:
<a href="#id51"><span class="problematic" id="id52">``</span></a><a href="#id53"><span class="problematic" id="id54">`</span></a>js
parser.addListener(&#8220;startkeyframes&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Starting animation definition &#8221; + event.name);</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endkeyframes&#8221;, function(event){</dt>
<dd>console.log(&#8220;Ending animation definition &#8221; + event.name);</dd>
</dl>
</div>
<div class="section" id="id55">
<h3>});<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<p>### <cite>startrule</cite> and <cite>endrule</cite> events</p>
<p>The <cite>startrule</cite> event fires just after all selectors on a rule have been parsed and the <cite>endrule</cite> event fires just after the closing right brace (<cite>}</cite>) is encountered for the rule. The <cite>event</cite> object has one additional property, <cite>selectors</cite>, which is an array of <cite>parserlib.css.Selector</cite> objects. Example:
<a href="#id56"><span class="problematic" id="id57">``</span></a><a href="#id58"><span class="problematic" id="id59">`</span></a>js
parser.addListener(&#8220;startrule&#8221;, function(event){</p>
<blockquote>
<div><p>console.log(&#8220;Starting rule with &#8221; + event.selectors.length + &#8221; selector(s)&#8221;);</p>
<dl class="docutils">
<dt>for (var i=0,len=event.selectors.length; i &lt; len; i++){</dt>
<dd><p class="first">var selector = event.selectors[i];</p>
<p>console.log(&#8221;  Selector #1 (&#8221; + selector.line + &#8221;,&#8221; + selector.col + &#8221;)&#8221;);</p>
<dl class="docutils">
<dt>for (var j=0,count=selector.parts.length; j &lt; count; j++){</dt>
<dd><p class="first">console.log(&#8221;    Unit #&#8221; + (j+1));</p>
<dl class="docutils">
<dt>if (selector.parts[j] instanceof parserlib.css.SelectorPart){</dt>
<dd><p class="first">console.log(&#8221;      Element name: &#8221; + selector.parts[j].elementName);</p>
<dl class="docutils">
<dt>for (var k=0; k &lt; selector.parts[j].modifiers.length; k++){</dt>
<dd>console.log(&#8221;        Modifier: &#8221; + selector.parts[j].modifiers[k]);</dd>
</dl>
<p class="last">}</p>
</dd>
<dt>} else{</dt>
<dd>console.log(&#8221;      Combinator: &#8221; + selector.parts[j]);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>});</p>
<dl class="docutils">
<dt>parser.addListener(&#8220;endrule&#8221;, function(event){</dt>
<dd>console.log(&#8220;Ending rule with selectors [&#8221; + event.selectors + &#8220;]&#8221;);</dd>
</dl>
</div>
<div class="section" id="id60">
<h3>});<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<p>### <cite>property</cite> event</p>
<p>The <cite>property</cite> event fires whenever a CSS property (<cite>name:value</cite>) is encountered, which may be inside of a rule, a media block, a page block, etc. The <cite>event</cite> object has three additional properties: <cite>property</cite>, which is the name of the property as a <cite>parserlib.css.PropertyName</cite> object, <cite>value</cite>, which is an instance of <cite>parserlib.css.PropertyValue`(both types inherit from `parserlib.util.SyntaxUnit</cite>), and <cite>important</cite>, which is a Boolean value indicating if the property is flagged with <cite>!important</cite>. Example:
<a href="#id61"><span class="problematic" id="id62">``</span></a><a href="#id63"><span class="problematic" id="id64">`</span></a>js
parser.addListener(&#8220;property&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Property &#8216;&#8221; + event.property + &#8220;&#8217; has a value of &#8216;&#8221; + event.value + &#8220;&#8217; and &#8221; + (event.important ? &#8220;is&#8221; : &#8220;isn&#8217;t&#8221;) + &#8221; important. (&#8221; + event.property.line + &#8221;,&#8221; + event.property.col + &#8221;)&#8221;);</div></blockquote>
</div>
<div class="section" id="id65">
<h3>});<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<p>### <cite>error</cite> event</p>
<p>The <cite>error</cite> event fires whenever a recoverable error occurs during parsing. When in strict mode, this event does not fire. The <cite>event</cite> object contains three additional properties: <cite>message</cite>, which is the error message, <cite>line</cite>, which is the line on which the error occurred, and <cite>col</cite>, which is the column on that line in which the error occurred. Example:
<a href="#id66"><span class="problematic" id="id67">``</span></a><a href="#id68"><span class="problematic" id="id69">`</span></a>js
parser.addListener(&#8220;error&#8221;, function(event){</p>
<blockquote>
<div>console.log(&#8220;Parse error: &#8221; + event.message + &#8221; (&#8221; + event.line + &#8221;,&#8221; + event.col + &#8221;)&#8221;, &#8220;error&#8221;);</div></blockquote>
</div>
<div class="section" id="id70">
<h3>});<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="error-recovery">
<h2>Error recovery<a class="headerlink" href="#error-recovery" title="Permalink to this headline">¶</a></h2>
<p>The CSS parser&#8217;s goal is to be on-par with error recovery of CSS parsers in browsers. To that end, the following error recovery mechanisms are in place:</p>
<ul class="simple">
<li><strong>Properties</strong> - a syntactically incorrect property definition will be skipped over completely. For instance, the second property below is dropped:</li>
</ul>
<p><a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a>css
a:hover {</p>
<blockquote>
<div>color: red;
font:: Helvetica;    /<em>dropped!</em>/
text-decoration: underline;</div></blockquote>
<div class="section" id="id75">
<h3>}<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Selectors</strong> - if there&#8217;s a syntax error in <em>any</em> selector, the entire rule is skipped over. For instance, the following rule is completely skipped:</li>
</ul>
<p><a href="#id76"><span class="problematic" id="id77">``</span></a><a href="#id78"><span class="problematic" id="id79">`</span></a>css
a:hover, foo ... bar {</p>
<blockquote>
<div>color: red;
font: Helvetica;
text-decoration: underline;</div></blockquote>
</div>
<div class="section" id="id80">
<h3>}<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>&#64; Rules</strong> - there are certain &#64; rules that are only valid in certain contexts. The parser will skip over <cite>&#64;charset</cite>, <cite>&#64;namespace</cite>, and <cite>&#64;import</cite> if they&#8217;re found anywhere other than the beginning of the input.</li>
<li><strong>Unknown &#64; Rules</strong> - any &#64; rules that isn&#8217;t recognized is automatically skipped, meaning the entire block after it is not parsed.</li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright © NFLabs. All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>