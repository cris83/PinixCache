

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>}) &mdash; PINIX Cache Docs 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PINIX Cache Docs 1.0 documentation" href="../../../../../../../../../../index.html"/> 

  
  <script src="../../../../../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../../../../../../index.html" class="icon icon-home"> PINIX Cache Docs
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../Global.html">Global</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../Origin.html">Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../VHost.html">VHost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../VHost-Proxy.html">Virtual Host Proxy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../../../../../../index.html">PINIX Cache Docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../../../../../../index.html">Docs</a> &raquo;</li>
      
    <li>})</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../../../../../../_sources/_themes/sphinx_rtd_theme-master/node_modules/grunt-contrib-jasmine/node_modules/grunt-lib-phantomjs/node_modules/phantomjs/node_modules/request/README.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Request — Simplified HTTP client</p>
<p>[![NPM](<a class="reference external" href="https://nodei.co/npm/request.png?downloads=true&amp;downloadRank=true&amp;stars=true)](https://nodei.co/npm/request/">https://nodei.co/npm/request.png?downloads=true&amp;downloadRank=true&amp;stars=true)](https://nodei.co/npm/request/</a>)</p>
<p>## Super simple to use</p>
<p>Request is designed to be the simplest way possible to make http calls. It supports HTTPS and follows redirects by default.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>javascript
var request = require(&#8216;request&#8217;);
request(&#8216;<a class="reference external" href="http://www.google.com">http://www.google.com</a>&#8216;, function (error, response, body) {</p>
<blockquote>
<div><dl class="docutils">
<dt>if (!error &amp;&amp; response.statusCode == 200) {</dt>
<dd>console.log(body) // Print the google web page.</dd>
</dl>
<p>}</p>
</div></blockquote>
<div class="section" id="id5">
<h1>})<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<p>## Streaming</p>
<p>You can stream any response to a file stream.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request('http://google.com/doodle.png').pipe(fs.createWriteStream('doodle.png'))</span>
<span class="pre">`</span></code></p>
<p>You can also stream a file to a PUT or POST request. This method will also check the file extension against a mapping of file extensions to content-types (in this case <cite>application/json</cite>) and use the proper <cite>content-type</cite> in the PUT request (if the headers don’t already provide one).</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">fs.createReadStream('file.json').pipe(request.put('http://mysite.com/obj.json'))</span>
<span class="pre">`</span></code></p>
<p>Request can also <cite>pipe</cite> to itself. When doing so, <cite>content-type</cite> and <cite>content-length</cite> are preserved in the PUT headers.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.get('http://google.com/img.png').pipe(request.put('http://mysite.com/img.png'))</span>
<span class="pre">`</span></code></p>
<p>Now let’s get fancy.</p>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>javascript
http.createServer(function (req, resp) {</p>
<blockquote>
<div><dl class="docutils">
<dt>if (req.url === &#8216;/doodle.png&#8217;) {</dt>
<dd><dl class="first docutils">
<dt>if (req.method === &#8216;PUT&#8217;) {</dt>
<dd>req.pipe(request.put(&#8216;<a class="reference external" href="http://mysite.com/doodle.png">http://mysite.com/doodle.png</a>&#8216;))</dd>
<dt>} else if (req.method === &#8216;GET&#8217; || req.method === &#8216;HEAD&#8217;) {</dt>
<dd>request.get(&#8216;<a class="reference external" href="http://mysite.com/doodle.png').pipe(resp">http://mysite.com/doodle.png&#8217;).pipe(resp</a>)</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id10">
<h1>})<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h1>
<p>You can also <cite>pipe()</cite> from <cite>http.ServerRequest</cite> instances, as well as to <cite>http.ServerResponse</cite> instances. The HTTP method, headers, and entity-body data will be sent. Which means that, if you don&#8217;t really care about security, you can do:</p>
<p><a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id13"><span class="problematic" id="id14">`</span></a>javascript
http.createServer(function (req, resp) {</p>
<blockquote>
<div><dl class="docutils">
<dt>if (req.url === &#8216;/doodle.png&#8217;) {</dt>
<dd>var x = request(&#8216;<a class="reference external" href="http://mysite.com/doodle.png">http://mysite.com/doodle.png</a>&#8216;)
req.pipe(x)
x.pipe(resp)</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id15">
<h1>})<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h1>
<p>And since <cite>pipe()</cite> returns the destination stream in ≥ Node 0.5.x you can do one line proxying. :)</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">req.pipe(request('http://mysite.com/doodle.png')).pipe(resp)</span>
<span class="pre">`</span></code></p>
<p>Also, none of this new functionality conflicts with requests previous features, it just expands them.</p>
<p><a href="#id16"><span class="problematic" id="id17">``</span></a><a href="#id18"><span class="problematic" id="id19">`</span></a>javascript
var r = request.defaults({&#8216;proxy&#8217;:&#8217;<a class="reference external" href="http://localproxy.com">http://localproxy.com</a>&#8216;})</p>
<dl class="docutils">
<dt>http.createServer(function (req, resp) {</dt>
<dd><dl class="first docutils">
<dt>if (req.url === &#8216;/doodle.png&#8217;) {</dt>
<dd>r.get(&#8216;<a class="reference external" href="http://google.com/doodle.png').pipe(resp">http://google.com/doodle.png&#8217;).pipe(resp</a>)</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
</div>
<div class="section" id="id20">
<h1>})<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h1>
<p>You can still use intermediate proxies, the requests will still follow HTTP forwards, etc.</p>
<p>## Proxies</p>
<p>If you specify a <cite>proxy</cite> option, then the request (and any subsequent
redirects) will be sent via a connection to the proxy server.</p>
<p>If your endpoint is an <cite>https</cite> url, and you are using a proxy, then
request will send a <cite>CONNECT</cite> request to the proxy server <em>first</em>, and
then use the supplied connection to connect to the endpoint.</p>
<p>That is, first it will make a request like:</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">HTTP/1.1</span> <span class="pre">CONNECT</span> <span class="pre">endpoint-server.com:80</span>
<span class="pre">Host:</span> <span class="pre">proxy-server.com</span>
<span class="pre">User-Agent:</span> <span class="pre">whatever</span> <span class="pre">user</span> <span class="pre">agent</span> <span class="pre">you</span> <span class="pre">specify</span>
<span class="pre">`</span></code></p>
<p>and then the proxy server make a TCP connection to <cite>endpoint-server</cite>
on port <cite>80</cite>, and return a response that looks like:</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">HTTP/1.1</span> <span class="pre">200</span> <span class="pre">OK</span>
<span class="pre">`</span></code></p>
<p>At this point, the connection is left open, and the client is
communicating directly with the <cite>endpoint-server.com</cite> machine.</p>
<p>See (the wikipedia page on HTTP
Tunneling)[<a class="reference external" href="http://en.wikipedia.org/wiki/HTTP_tunnel">http://en.wikipedia.org/wiki/HTTP_tunnel</a>] for more
information.</p>
<p>By default, when proxying <cite>http</cite> traffic, request will simply make a
standard proxied <cite>http</cite> request.  This is done by making the <cite>url</cite>
section of the initial line of the request a fully qualified url to
the endpoint.</p>
<p>For example, it will make a single request that looks like:</p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a>`
HTTP/1.1 GET <a class="reference external" href="http://endpoint-server.com/some-url">http://endpoint-server.com/some-url</a>
Host: proxy-server.com
Other-Headers: all go here</p>
<p>request body or whatever
<a href="#id23"><span class="problematic" id="id24">``</span></a><a href="#id25"><span class="problematic" id="id26">`</span></a></p>
<p>Because a pure &#8220;http over http&#8221; tunnel offers no additional security
or other features, it is generally simpler to go with a
straightforward HTTP proxy in this case.  However, if you would like
to force a tunneling proxy, you may set the <cite>tunnel</cite> option to <cite>true</cite>.</p>
<p>If you are using a tunneling proxy, you may set the
<cite>proxyHeaderWhiteList</cite> to share certain headers with the proxy.</p>
<p>By default, this set is:</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">accept</span>
<span class="pre">accept-charset</span>
<span class="pre">accept-encoding</span>
<span class="pre">accept-language</span>
<span class="pre">accept-ranges</span>
<span class="pre">cache-control</span>
<span class="pre">content-encoding</span>
<span class="pre">content-language</span>
<span class="pre">content-length</span>
<span class="pre">content-location</span>
<span class="pre">content-md5</span>
<span class="pre">content-range</span>
<span class="pre">content-type</span>
<span class="pre">connection</span>
<span class="pre">date</span>
<span class="pre">expect</span>
<span class="pre">max-forwards</span>
<span class="pre">pragma</span>
<span class="pre">proxy-authorization</span>
<span class="pre">referer</span>
<span class="pre">te</span>
<span class="pre">transfer-encoding</span>
<span class="pre">user-agent</span>
<span class="pre">via</span>
<span class="pre">`</span></code></p>
<p>Note that, when using a tunneling proxy, the <cite>proxy-authorization</cite>
header is <em>never</em> sent to the endpoint server, but only to the proxy
server.  All other headers are sent as-is over the established
connection.</p>
<p>## UNIX Socket</p>
<p><cite>request</cite> supports the <cite>unix://</cite> protocol for all requests. The path is assumed to be absolute to the root of the host file system.</p>
<p>HTTP paths are extracted from the supplied URL by testing each level of the full URL against net.connect for a socket response.</p>
<p>Thus the following request will GET <cite>/httppath</cite> from the HTTP server listening on <cite>/tmp/unix.socket</cite></p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.get('unix://tmp/unix.socket/httppath')</span>
<span class="pre">`</span></code></p>
<p>## Forms</p>
<p><cite>request</cite> supports <cite>application/x-www-form-urlencoded</cite> and <cite>multipart/form-data</cite> form uploads. For <cite>multipart/related</cite> refer to the <cite>multipart</cite> API.</p>
<p>URL-encoded forms are simple.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.post('http://service.com/upload',</span> <span class="pre">{form:{key:'value'}})</span>
<span class="pre">//</span> <span class="pre">or</span>
<span class="pre">request.post('http://service.com/upload').form({key:'value'})</span>
<span class="pre">`</span></code></p>
<p>For <cite>multipart/form-data</cite> we use the [form-data](<a class="reference external" href="https://github.com/felixge/node-form-data">https://github.com/felixge/node-form-data</a>) library by [&#64;felixge](<a class="reference external" href="https://github.com/felixge">https://github.com/felixge</a>). You don’t need to worry about piping the form object or setting the headers, <cite>request</cite> will handle that for you.</p>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a>javascript
var r = request.post(&#8216;<a class="reference external" href="http://service.com/upload">http://service.com/upload</a>&#8216;, function optionalCallback (err, httpResponse, body) {</p>
<blockquote>
<div><dl class="docutils">
<dt>if (err) {</dt>
<dd>return console.error(&#8216;upload failed:&#8217;, err);</dd>
</dl>
<p>}
console.log(&#8216;Upload successful!  Server responded with:&#8217;, body);</p>
</div></blockquote>
<p>})
var form = r.form()
form.append(&#8216;my_field&#8217;, &#8216;my_value&#8217;)
form.append(&#8216;my_buffer&#8217;, new Buffer([1, 2, 3]))
form.append(&#8216;my_file&#8217;, fs.createReadStream(path.join(__dirname, &#8216;doodle.png&#8217;)))
form.append(&#8216;remote_file&#8217;, request(&#8216;<a class="reference external" href="http://google.com/doodle.png">http://google.com/doodle.png</a>&#8216;))</p>
<p>// Just like always, <cite>r</cite> is a writable stream, and can be used as such (you have until nextTick to pipe it, etc.)
// Alternatively, you can provide a callback (that&#8217;s what this example does — see <cite>optionalCallback</cite> above).
<a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a></p>
<p>## HTTP Authentication</p>
<p><a href="#id35"><span class="problematic" id="id36">``</span></a><a href="#id37"><span class="problematic" id="id38">`</span></a>javascript
request.get(&#8216;<a class="reference external" href="http://some.server.com/').auth('username">http://some.server.com/&#8217;).auth(&#8216;username</a>&#8216;, &#8216;password&#8217;, false);
// or
request.get(&#8216;<a class="reference external" href="http://some.server.com/">http://some.server.com/</a>&#8216;, {</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8216;auth&#8217;: {</dt>
<dd>&#8216;user&#8217;: &#8216;username&#8217;,
&#8216;pass&#8217;: &#8216;password&#8217;,
&#8216;sendImmediately&#8217;: false</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>});
// or
request.get(&#8216;<a class="reference external" href="http://some.server.com/').auth(null">http://some.server.com/&#8217;).auth(null</a>, null, true, &#8216;bearerToken&#8217;);
// or
request.get(&#8216;<a class="reference external" href="http://some.server.com/">http://some.server.com/</a>&#8216;, {</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8216;auth&#8217;: {</dt>
<dd>&#8216;bearer&#8217;: &#8216;bearerToken&#8217;</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id39">
<h1>});<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h1>
<p>If passed as an option, <cite>auth</cite> should be a hash containing values <cite>user</cite> || <cite>username</cite>, <cite>pass</cite> || <cite>password</cite>, and <cite>sendImmediately</cite> (optional).  The method form takes parameters <cite>auth(username, password, sendImmediately)</cite>.</p>
<p><cite>sendImmediately</cite> defaults to <cite>true</cite>, which causes a basic authentication header to be sent.  If <cite>sendImmediately</cite> is <cite>false</cite>, then <cite>request</cite> will retry with a proper authentication header after receiving a <cite>401</cite> response from the server (which must contain a <cite>WWW-Authenticate</cite> header indicating the required authentication method).</p>
<p>Note that you can also use for basic authentication a trick using the URL itself, as specified in [RFC 1738](<a class="reference external" href="http://www.ietf.org/rfc/rfc1738.txt">http://www.ietf.org/rfc/rfc1738.txt</a>).
Simply pass the <cite>user:password</cite> before the host with an <cite>&#64;</cite> sign.</p>
<p><a href="#id40"><span class="problematic" id="id41">``</span></a><a href="#id42"><span class="problematic" id="id43">`</span></a>javascript
var username = &#8216;username&#8217;,</p>
<blockquote>
<div>password = &#8216;password&#8217;,
url = &#8216;<a class="reference external" href="http://">http://</a>&#8216; + username + &#8216;:&#8217; + password + <a class="reference external" href="mailto:'&#37;&#52;&#48;some&#46;server&#46;com">'<span>&#64;</span>some<span>&#46;</span>server<span>&#46;</span>com</a>&#8216;;</div></blockquote>
<dl class="docutils">
<dt>request({url: url}, function (error, response, body) {</dt>
<dd>// Do more stuff with &#8216;body&#8217; here</dd>
</dl>
</div>
<div class="section" id="id44">
<h1>});<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h1>
<p>Digest authentication is supported, but it only works with <cite>sendImmediately</cite> set to <cite>false</cite>; otherwise <cite>request</cite> will send basic authentication on the initial request, which will probably cause the request to fail.</p>
<p>Bearer authentication is supported, and is activated when the <cite>bearer</cite> value is available. The value may be either a <cite>String</cite> or a <cite>Function</cite> returning a <cite>String</cite>. Using a function to supply the bearer token is particularly useful if used in conjuction with <cite>defaults</cite> to allow a single function to supply the last known token at the time or sending a request or to compute one on the fly.</p>
<p>## OAuth Signing</p>
<p><a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">`</span></a>javascript
// Twitter OAuth
var qs = require(&#8216;querystring&#8217;)</p>
<blockquote>
<div><dl class="docutils">
<dt>, oauth =</dt>
<dd>{ callback: &#8216;<a class="reference external" href="http://mysite.com/callback/">http://mysite.com/callback/</a>&#8216;
, consumer_key: CONSUMER_KEY
, consumer_secret: CONSUMER_SECRET
}</dd>
</dl>
<p>, url = &#8216;<a class="reference external" href="https://api.twitter.com/oauth/request_token">https://api.twitter.com/oauth/request_token</a>&#8216;
;</p>
</div></blockquote>
<dl class="docutils">
<dt>request.post({url:url, oauth:oauth}, function (e, r, body) {</dt>
<dd><p class="first">// Ideally, you would take the body in the response
// and construct a URL that a user clicks on (like a sign in button).
// The verifier is only available in the response after a user has
// verified with twitter that they are authorizing your app.
var access_token = qs.parse(body)</p>
<blockquote>
<div><dl class="docutils">
<dt>, oauth =</dt>
<dd>{ consumer_key: CONSUMER_KEY
, consumer_secret: CONSUMER_SECRET
, token: access_token.oauth_token
, verifier: access_token.oauth_verifier
}</dd>
</dl>
<p>, url = &#8216;<a class="reference external" href="https://api.twitter.com/oauth/access_token">https://api.twitter.com/oauth/access_token</a>&#8216;
;</p>
</div></blockquote>
<dl class="docutils">
<dt>request.post({url:url, oauth:oauth}, function (e, r, body) {</dt>
<dd><dl class="first docutils">
<dt>var perm_token = qs.parse(body)</dt>
<dd><dl class="first docutils">
<dt>, oauth =</dt>
<dd>{ consumer_key: CONSUMER_KEY
, consumer_secret: CONSUMER_SECRET
, token: perm_token.oauth_token
, token_secret: perm_token.oauth_token_secret
}</dd>
</dl>
<p>, url = &#8216;<a class="reference external" href="https://api.twitter.com/1.1/users/show.json">https://api.twitter.com/1.1/users/show.json</a>?&#8217;
, params =</p>
<blockquote>
<div>{ screen_name: perm_token.screen_name
, user_id: perm_token.user_id
}</div></blockquote>
<p class="last">;</p>
</dd>
</dl>
<p>url += qs.stringify(params)
request.get({url:url, oauth:oauth, json:true}, function (e, r, user) {</p>
<blockquote>
<div>console.log(user)</div></blockquote>
<p class="last">})</p>
</dd>
</dl>
<p class="last">})</p>
</dd>
</dl>
</div>
<div class="section" id="id49">
<h1>})<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h1>
<p>## Custom HTTP Headers</p>
<p>HTTP Headers, such as <cite>User-Agent</cite>, can be set in the <cite>options</cite> object.
In the example below, we call the github API to find out the number
of stars and forks for the request repository. This requires a
custom <cite>User-Agent</cite> header as well as https.</p>
<p><a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id52"><span class="problematic" id="id53">`</span></a>javascript
var request = require(&#8216;request&#8217;);</p>
<dl class="docutils">
<dt>var options = {</dt>
<dd><p class="first">url: &#8216;<a class="reference external" href="https://api.github.com/repos/mikeal/request">https://api.github.com/repos/mikeal/request</a>&#8216;,
headers: {</p>
<blockquote>
<div>&#8216;User-Agent&#8217;: &#8216;request&#8217;</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p>};</p>
<dl class="docutils">
<dt>function callback(error, response, body) {</dt>
<dd><dl class="first docutils">
<dt>if (!error &amp;&amp; response.statusCode == 200) {</dt>
<dd>var info = JSON.parse(body);
console.log(info.stargazers_count + &#8221; Stars&#8221;);
console.log(info.forks_count + &#8221; Forks&#8221;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
<p>request(options, callback);
<a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a></p>
<p>## request(options, callback)</p>
<p>The first argument can be either a <cite>url</cite> or an <cite>options</cite> object. The only required option is <cite>uri</cite>; all others are optional.</p>
<ul class="simple">
<li><cite>uri</cite> || <cite>url</cite> - fully qualified uri or a parsed url object from <cite>url.parse()</cite></li>
<li><cite>qs</cite> - object containing querystring values to be appended to the <cite>uri</cite></li>
<li><cite>method</cite> - http method (default: <cite>&#8220;GET&#8221;</cite>)</li>
<li><cite>headers</cite> - http headers (default: <cite>{}</cite>)</li>
<li><cite>body</cite> - entity body for PATCH, POST and PUT requests. Must be a <cite>Buffer</cite> or <cite>String</cite>.</li>
<li><cite>form</cite> - when passed an object or a querystring, this sets <cite>body</cite> to a querystring representation of value, and adds <cite>Content-type: application/x-www-form-urlencoded; charset=utf-8</cite> header. When passed no options, a <cite>FormData</cite> instance is returned (and is piped to request).</li>
<li><cite>auth</cite> - A hash containing values <cite>user</cite> || <cite>username</cite>, <cite>pass</cite> || <cite>password</cite>, and <cite>sendImmediately</cite> (optional).  See documentation above.</li>
<li><cite>json</cite> - sets <cite>body</cite> but to JSON representation of value and adds <cite>Content-type: application/json</cite> header.  Additionally, parses the response body as JSON.</li>
<li><cite>multipart</cite> - (experimental) array of objects which contains their own headers and <cite>body</cite> attribute. Sends <cite>multipart/related</cite> request. See example below.</li>
<li><cite>followRedirect</cite> - follow HTTP 3xx responses as redirects (default: <cite>true</cite>). This property can also be implemented as function which gets <cite>response</cite> object as a single argument and should return <cite>true</cite> if redirects should continue or <cite>false</cite> otherwise.</li>
<li><cite>followAllRedirects</cite> - follow non-GET HTTP 3xx responses as redirects (default: <cite>false</cite>)</li>
<li><cite>maxRedirects</cite> - the maximum number of redirects to follow (default: <cite>10</cite>)</li>
<li><cite>encoding</cite> - Encoding to be used on <cite>setEncoding</cite> of response data. If <cite>null</cite>, the <cite>body</cite> is returned as a <cite>Buffer</cite>.</li>
<li><cite>pool</cite> - A hash object containing the agents for these requests. If omitted, the request will use the global pool (which is set to node&#8217;s default <cite>maxSockets</cite>)</li>
<li><cite>pool.maxSockets</cite> - Integer containing the maximum amount of sockets in the pool.</li>
<li><cite>timeout</cite> - Integer containing the number of milliseconds to wait for a request to respond before aborting the request</li>
<li><cite>proxy</cite> - An HTTP proxy to be used. Supports proxy Auth with Basic Auth, identical to support for the <cite>url</cite> parameter (by embedding the auth info in the <cite>uri</cite>)</li>
<li><cite>oauth</cite> - Options for OAuth HMAC-SHA1 signing. See documentation above.</li>
<li><cite>hawk</cite> - Options for [Hawk signing](<a class="reference external" href="https://github.com/hueniverse/hawk">https://github.com/hueniverse/hawk</a>). The <cite>credentials</cite> key must contain the necessary signing info, [see hawk docs for details](<a class="reference external" href="https://github.com/hueniverse/hawk#usage-example">https://github.com/hueniverse/hawk#usage-example</a>).</li>
<li><cite>strictSSL</cite> - If <cite>true</cite>, requires SSL certificates be valid. <strong>Note:</strong> to use your own certificate authority, you need to specify an agent that was created with that CA as an option.</li>
<li><cite>jar</cite> - If <cite>true</cite> and <cite>tough-cookie</cite> is installed, remember cookies for future use (or define your custom cookie jar; see examples section)</li>
<li><cite>aws</cite> - <cite>object</cite> containing AWS signing information. Should have the properties <cite>key</cite>, <cite>secret</cite>. Also requires the property <cite>bucket</cite>, unless you’re specifying your <cite>bucket</cite> as part of the path, or the request doesn’t use a bucket (i.e. GET Services)</li>
<li><cite>httpSignature</cite> - Options for the [HTTP Signature Scheme](<a class="reference external" href="https://github.com/joyent/node-http-signature/blob/master/http_signing.md">https://github.com/joyent/node-http-signature/blob/master/http_signing.md</a>) using [Joyent&#8217;s library](<a class="reference external" href="https://github.com/joyent/node-http-signature">https://github.com/joyent/node-http-signature</a>). The <cite>keyId</cite> and <cite>key</cite> properties must be specified. See the docs for other options.</li>
<li><cite>localAddress</cite> - Local interface to bind for network connections.</li>
<li><cite>gzip</cite> - If <cite>true</cite>, add an <cite>Accept-Encoding</cite> header to request compressed content encodings from the server (if not already present) and decode supported content encodings in the response.</li>
<li><cite>tunnel</cite> - If <cite>true</cite>, then <em>always</em> use a tunneling proxy.  If
<cite>false</cite> (default), then tunneling will only be used if the
destination is <cite>https</cite>, or if a previous request in the redirect
chain used a tunneling proxy.</li>
<li><cite>proxyHeaderWhiteList</cite> - A whitelist of headers to send to a
tunneling proxy.</li>
</ul>
<p>The callback argument gets 3 arguments:</p>
<ol class="arabic simple">
<li>An <cite>error</cite> when applicable (usually from [<cite>http.ClientRequest</cite>](<a class="reference external" href="http://nodejs.org/api/http.html#http_class_http_clientrequest">http://nodejs.org/api/http.html#http_class_http_clientrequest</a>) object)</li>
<li>An [<cite>http.IncomingMessage</cite>](<a class="reference external" href="http://nodejs.org/api/http.html#http_http_incomingmessage">http://nodejs.org/api/http.html#http_http_incomingmessage</a>) object</li>
<li>The third is the <cite>response</cite> body (<cite>String</cite> or <cite>Buffer</cite>, or JSON object if the <cite>json</cite> option is supplied)</li>
</ol>
<p>## Convenience methods</p>
<p>There are also shorthand methods for different HTTP METHODs and some other conveniences.</p>
<p>### request.defaults(options)</p>
<p>This method returns a wrapper around the normal request API that defaults to whatever options you pass in to it.</p>
<p><strong>Note:</strong> You can call <cite>.defaults()</cite> on the wrapper that is returned from <cite>request.defaults</cite> to add/override defaults that were previously defaulted.</p>
<p>For example:
<a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id60"><span class="problematic" id="id61">`</span></a>javascript
//requests using baseRequest() will set the &#8216;x-token&#8217; header
var baseRequest = request.defaults({</p>
<blockquote>
<div>headers: {x-token: &#8216;my-token&#8217;}</div></blockquote>
<p>})</p>
<p>//requests using specialRequest() will include the &#8216;x-token&#8217; header set in
//baseRequest and will also include the &#8216;special&#8217; header
var specialRequest = baseRequest.defaults({</p>
<blockquote>
<div>headers: {special: &#8216;special value&#8217;}</div></blockquote>
</div>
<div class="section" id="id62">
<h1>})<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h1>
<p>### request.put</p>
<p>Same as <cite>request()</cite>, but defaults to <cite>method: &#8220;PUT&#8221;</cite>.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.put(url)</span>
<span class="pre">`</span></code></p>
<p>### request.patch</p>
<p>Same as <cite>request()</cite>, but defaults to <cite>method: &#8220;PATCH&#8221;</cite>.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.patch(url)</span>
<span class="pre">`</span></code></p>
<p>### request.post</p>
<p>Same as <cite>request()</cite>, but defaults to <cite>method: &#8220;POST&#8221;</cite>.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.post(url)</span>
<span class="pre">`</span></code></p>
<p>### request.head</p>
<p>Same as request() but defaults to <cite>method: &#8220;HEAD&#8221;</cite>.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.head(url)</span>
<span class="pre">`</span></code></p>
<p>### request.del</p>
<p>Same as <cite>request()</cite>, but defaults to <cite>method: &#8220;DELETE&#8221;</cite>.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.del(url)</span>
<span class="pre">`</span></code></p>
<p>### request.get</p>
<p>Same as <cite>request()</cite> (for uniformity).</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.get(url)</span>
<span class="pre">`</span></code>
### request.cookie</p>
<p>Function that creates a new cookie.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.cookie('cookie_string_here')</span>
<span class="pre">`</span></code>
### request.jar</p>
<p>Function that creates a new cookie jar.</p>
<p><code class="docutils literal"><span class="pre">`javascript</span>
<span class="pre">request.jar()</span>
<span class="pre">`</span></code></p>
<p>## Examples:</p>
<dl class="docutils">
<dt><a href="#id63"><span class="problematic" id="id64">``</span></a><a href="#id65"><span class="problematic" id="id66">`</span></a>javascript</dt>
<dd><dl class="first docutils">
<dt>var request = require(&#8216;request&#8217;)</dt>
<dd>, rand = Math.floor(Math.random()*100000000).toString()
;</dd>
<dt>request(</dt>
<dd><p class="first">{ method: &#8216;PUT&#8217;
, uri: &#8216;<a class="reference external" href="http://mikeal.iriscouch.com/testjs/">http://mikeal.iriscouch.com/testjs/</a>&#8216; + rand
, multipart:</p>
<blockquote>
<div><dl class="docutils">
<dt>[ { &#8216;content-type&#8217;: &#8216;application/json&#8217;</dt>
<dd>,  body: JSON.stringify({foo: &#8216;bar&#8217;, _attachments: {&#8216;message.txt&#8217;: {follows: true, length: 18, &#8216;content_type&#8217;: &#8216;text/plain&#8217; }}})
}</dd>
</dl>
<p>, { body: &#8216;I am an attachment&#8217; }
]</p>
</div></blockquote>
<p class="last">}</p>
</dd>
<dt>, function (error, response, body) {</dt>
<dd><blockquote class="first">
<div><dl class="docutils">
<dt>if(response.statusCode == 201){</dt>
<dd>console.log(&#8216;document saved as: <a class="reference external" href="http://mikeal.iriscouch.com/testjs/'+">http://mikeal.iriscouch.com/testjs/&#8217;+</a> rand)</dd>
<dt>} else {</dt>
<dd>console.log(&#8216;error: &#8216;+ response.statusCode)
console.log(body)</dd>
</dl>
<p>}</p>
</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p><a href="#id67"><span class="problematic" id="id68">``</span></a><a href="#id69"><span class="problematic" id="id70">`</span></a></p>
<p>Cookies are disabled by default (else, they would be used in subsequent requests). To enable cookies, set <cite>jar</cite> to <cite>true</cite> (either in <cite>defaults</cite> or <cite>options</cite>) and install <cite>tough-cookie</cite>.</p>
<p><a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a>javascript
var request = request.defaults({jar: true})
request(&#8216;<a class="reference external" href="http://www.google.com">http://www.google.com</a>&#8216;, function () {</p>
<blockquote>
<div>request(&#8216;<a class="reference external" href="http://images.google.com">http://images.google.com</a>&#8216;)</div></blockquote>
</div>
<div class="section" id="id75">
<h1>})<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h1>
<p>To use a custom cookie jar (instead of <cite>request</cite>’s global cookie jar), set <cite>jar</cite> to an instance of <cite>request.jar()</cite> (either in <cite>defaults</cite> or <cite>options</cite>)</p>
<p><a href="#id76"><span class="problematic" id="id77">``</span></a><a href="#id78"><span class="problematic" id="id79">`</span></a>javascript
var j = request.jar()
var request = request.defaults({<a class="reference external" href="jar:j">jar:j</a>})
request(&#8216;<a class="reference external" href="http://www.google.com">http://www.google.com</a>&#8216;, function () {</p>
<blockquote>
<div>request(&#8216;<a class="reference external" href="http://images.google.com">http://images.google.com</a>&#8216;)</div></blockquote>
</div>
<div class="section" id="id80">
<h1>})<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h1>
<p>OR</p>
<p><a href="#id81"><span class="problematic" id="id82">``</span></a><cite>javascript
// `npm install &#8211;save tough-cookie</cite> before this works
var j = request.jar()
var cookie = request.cookie(&#8216;your_cookie_here&#8217;)
j.setCookie(cookie, uri);
request({url: &#8216;<a class="reference external" href="http://www.google.com">http://www.google.com</a>&#8216;, jar: j}, function () {</p>
<blockquote>
<div>request(&#8216;<a class="reference external" href="http://images.google.com">http://images.google.com</a>&#8216;)</div></blockquote>
</div>
<div class="section" id="id83">
<h1>})<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h1>
<p>To inspect your cookie jar after a request</p>
<p><a href="#id84"><span class="problematic" id="id85">``</span></a><a href="#id86"><span class="problematic" id="id87">`</span></a>javascript
var j = request.jar()
request({url: &#8216;<a class="reference external" href="http://www.google.com">http://www.google.com</a>&#8216;, jar: j}, function () {</p>
<blockquote>
<div>var cookie_string = j.getCookieString(uri); // &#8220;key1=value1; key2=value2; ...&#8221;
var cookies = j.getCookies(uri);
// [{key: &#8216;key1&#8217;, value: &#8216;value1&#8217;, domain: &#8220;www.google.com&#8221;, ...}, ...]</div></blockquote>
</div>
<div class="section" id="id88">
<h1>})<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h1>
<p>## Debugging</p>
<p>There are at least three ways to debug the operation of <cite>request</cite>:</p>
<ol class="arabic simple">
<li>Launch the node process like <cite>NODE_DEBUG=request node script.js</cite>
(<cite>lib,request,otherlib</cite> works too).</li>
<li>Set <cite>require(&#8216;request&#8217;).debug = true</cite> at any time (this does the same thing
as #1).</li>
<li>Use the [request-debug module](<a class="reference external" href="https://github.com/nylen/request-debug">https://github.com/nylen/request-debug</a>) to
view request and response headers and bodies.</li>
</ol>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright © NFLabs. All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>