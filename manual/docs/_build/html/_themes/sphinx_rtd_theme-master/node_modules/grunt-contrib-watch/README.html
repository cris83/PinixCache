

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>}, &mdash; PINIX Cache Docs 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PINIX Cache Docs 1.0 documentation" href="../../../../index.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> PINIX Cache Docs
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Global.html">Global</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Origin.html">Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../VHost.html">VHost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../VHost-Proxy.html">Virtual Host Proxy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">PINIX Cache Docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
    <li>},</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/_themes/sphinx_rtd_theme-master/node_modules/grunt-contrib-watch/README.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># grunt-contrib-watch v0.6.1 [![Build Status](<a class="reference external" href="https://travis-ci.org/gruntjs/grunt-contrib-watch.png?branch=master)](https://travis-ci.org/gruntjs/grunt-contrib-watch">https://travis-ci.org/gruntjs/grunt-contrib-watch.png?branch=master)](https://travis-ci.org/gruntjs/grunt-contrib-watch</a>)</p>
<p>&gt; Run predefined tasks whenever watched file patterns are added, changed or deleted.</p>
<p>## Getting Started
This plugin requires Grunt <cite>~0.4.0</cite></p>
<p>If you haven&#8217;t used [Grunt](<a class="reference external" href="http://gruntjs.com/">http://gruntjs.com/</a>) before, be sure to check out the [Getting Started](<a class="reference external" href="http://gruntjs.com/getting-started">http://gruntjs.com/getting-started</a>) guide, as it explains how to create a [Gruntfile](<a class="reference external" href="http://gruntjs.com/sample-gruntfile">http://gruntjs.com/sample-gruntfile</a>) as well as install and use Grunt plugins. Once you&#8217;re familiar with that process, you may install this plugin with this command:</p>
<p><code class="docutils literal"><span class="pre">`shell</span>
<span class="pre">npm</span> <span class="pre">install</span> <span class="pre">grunt-contrib-watch</span> <span class="pre">--save-dev</span>
<span class="pre">`</span></code></p>
<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>
<p><code class="docutils literal"><span class="pre">`js</span>
<span class="pre">grunt.loadNpmTasks('grunt-contrib-watch');</span>
<span class="pre">`</span></code></p>
<p>## Watch task
_Run this task with the <cite>grunt watch</cite> command._</p>
<p>### Settings</p>
<p>There are a number of options available. Please review the [minimatch options here](<a class="reference external" href="https://github.com/isaacs/minimatch#options">https://github.com/isaacs/minimatch#options</a>). As well as some additional options as follows:</p>
<p>#### files
Type: <cite>String|Array</cite></p>
<p>This defines what file patterns this task will watch. Can be a string or an array of files and/or minimatch patterns.</p>
<p>#### tasks
Type: <cite>String|Array</cite></p>
<p>This defines which tasks to run when a watched file event occurs.</p>
<p>#### options.spawn
Type: <cite>Boolean</cite>
Default: true</p>
<p>Whether to spawn task runs in a child process. Setting this option to <cite>false</cite> speeds up the reaction time of the watch (usually 500ms faster for most) and allows subsequent task runs to share the same context. Not spawning task runs can make the watch more prone to failing so please use as needed.</p>
<p>Example:
<a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>scripts: {</dt>
<dd><p class="first">files: [&#8216;<a href="#id5"><span class="problematic" id="id6">**</span></a>/<a href="#id7"><span class="problematic" id="id8">*</span></a>.js&#8217;],
tasks: [&#8216;jshint&#8217;],
options: {</p>
<blockquote>
<div>spawn: false,</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
<div class="section" id="id9">
<h1>},<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h1>
<p><em>For backwards compatibility the option `nospawn` is still available and will do the opposite of `spawn`.</em></p>
<p>#### options.interrupt
Type: <cite>Boolean</cite>
Default: false</p>
<p>As files are modified this watch task will spawn tasks in child processes. The default behavior will only spawn a new child process per target when the previous process has finished. Set the <cite>interrupt</cite> option to true to terminate the previous process and spawn a new one upon later changes.</p>
<p>Example:
<a href="#id10"><span class="problematic" id="id11">``</span></a><a href="#id12"><span class="problematic" id="id13">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>scripts: {</dt>
<dd><p class="first">files: &#8216;<a href="#id14"><span class="problematic" id="id15">**</span></a>/<a href="#id16"><span class="problematic" id="id17">*</span></a>.js&#8217;,
tasks: [&#8216;jshint&#8217;],
options: {</p>
<blockquote>
<div>interrupt: true,</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id18">
<h1>},<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h1>
<p>#### options.debounceDelay
Type: <cite>Integer</cite>
Default: 500</p>
<p>How long to wait before emitting events in succession for the same filepath and status. For example if your <cite>Gruntfile.js</cite> file was <cite>changed</cite>, a <cite>changed</cite> event will only fire again after the given milliseconds.</p>
<p>Example:
<a href="#id19"><span class="problematic" id="id20">``</span></a><a href="#id21"><span class="problematic" id="id22">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>scripts: {</dt>
<dd><p class="first">files: &#8216;<a href="#id23"><span class="problematic" id="id24">**</span></a>/<a href="#id25"><span class="problematic" id="id26">*</span></a>.js&#8217;,
tasks: [&#8216;jshint&#8217;],
options: {</p>
<blockquote>
<div>debounceDelay: 250,</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id27">
<h1>},<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h1>
<p>#### options.interval
Type: <cite>Integer</cite>
Default: 100</p>
<p>The <cite>interval</cite> is passed to <cite>fs.watchFile</cite>. Since <cite>interval</cite> is only used by <cite>fs.watchFile</cite> and this watcher also uses <cite>fs.watch</cite>; it is recommended to ignore this option. <em>Default is 100ms</em>.</p>
<p>#### options.event
Type: <cite>String|Array</cite>
Default: <cite>&#8216;all&#8217;</cite></p>
<p>Specify the type watch event that trigger the specified task. This option can be one or many of: <cite>&#8216;all&#8217;</cite>, <cite>&#8216;changed&#8217;</cite>, <cite>&#8216;added&#8217;</cite> and <cite>&#8216;deleted&#8217;</cite>.</p>
<p>Example:
<a href="#id28"><span class="problematic" id="id29">``</span></a><a href="#id30"><span class="problematic" id="id31">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>scripts: {</dt>
<dd><p class="first">files: &#8216;<a href="#id32"><span class="problematic" id="id33">**</span></a>/<a href="#id34"><span class="problematic" id="id35">*</span></a>.js&#8217;,
tasks: [&#8216;generateFileManifest&#8217;],
options: {</p>
<blockquote>
<div>event: [&#8216;added&#8217;, &#8216;deleted&#8217;],</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id36">
<h1>},<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h1>
<p>#### options.reload
Type: <cite>Boolean</cite>
Default: <cite>false</cite></p>
<p>By default, if <cite>Gruntfile.js</cite> is being watched, then changes to it will trigger the watch task to restart, and reload the <cite>Gruntfile.js</cite> changes.
When <cite>reload</cite> is set to <cite>true</cite>, changes to <em>any</em> of the watched files will trigger the watch task to restart.
This is especially useful if your <cite>Gruntfile.js</cite> is dependent on other files.</p>
<p><a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>configFiles: {</dt>
<dd><p class="first">files: [ &#8216;Gruntfile.js&#8217;, &#8216;config/<a href="#id41"><span class="problematic" id="id42">*</span></a>.js&#8217; ],
options: {</p>
<blockquote>
<div>reload: true</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id43">
<h1>}<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h1>
<p>#### options.forever
Type: <cite>Boolean</cite>
Default: true</p>
<p>This is <em>only a task level option</em> and cannot be configured per target. By default the watch task will duck punch <cite>grunt.fatal</cite> and <cite>grunt.warn</cite> to try and prevent them from exiting the watch process. If you don&#8217;t want <cite>grunt.fatal</cite> and <cite>grunt.warn</cite> to be overridden set the <cite>forever</cite> option to <cite>false</cite>.</p>
<p>#### options.dateFormat
Type: <cite>Function</cite></p>
<p>This is <em>only a task level option</em> and cannot be configured per target. By default when the watch has finished running tasks it will display the message <cite>Completed in 1.301s at Thu Jul 18 2013 14:58:21 GMT-0700 (PDT) - Waiting...</cite>. You can override this message by supplying your own function:</p>
<p><a href="#id44"><span class="problematic" id="id45">``</span></a><a href="#id46"><span class="problematic" id="id47">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>options: {</dt>
<dd><dl class="first docutils">
<dt>dateFormat: function(time) {</dt>
<dd>grunt.log.writeln(&#8216;The watch finished in &#8216; + time + &#8216;ms at&#8217; + (new Date()).toString());
grunt.log.writeln(&#8216;Waiting for more changes...&#8217;);</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},
scripts: {</p>
<blockquote>
<div>files: &#8216;<a href="#id48"><span class="problematic" id="id49">**</span></a>/<a href="#id50"><span class="problematic" id="id51">*</span></a>.js&#8217;,
tasks: &#8216;jshint&#8217;,</div></blockquote>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id52">
<h1>},<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h1>
<p>#### options.atBegin
Type: <cite>Boolean</cite>
Default: false</p>
<p>This option will trigger the run of each specified task at startup of the watcher.</p>
<p>#### options.livereload
Type: <cite>Boolean|Number|Object</cite>
Default: false</p>
<p>Set to <cite>true</cite> or set <cite>livereload: 1337</cite> to a port number to enable live reloading. Default and recommended port is <cite>35729</cite>.</p>
<p>If enabled a live reload server will be started with the watch task per target. Then after the indicated tasks have ran, the live reload server will be triggered with the modified files.</p>
<p>Example:
<a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>css: {</dt>
<dd><p class="first">files: &#8216;<a href="#id57"><span class="problematic" id="id58">**</span></a>/<a href="#id59"><span class="problematic" id="id60">*</span></a>.sass&#8217;,
tasks: [&#8216;sass&#8217;],
options: {</p>
<blockquote>
<div>livereload: true,</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id61">
<h1>},<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h1>
<p>It&#8217;s possible to get livereload working over https connections. To do this, pass an object to <cite>livereload</cite> with a <cite>key</cite> and <cite>cert</cite> paths specified.</p>
<p>Example:
<a href="#id62"><span class="problematic" id="id63">``</span></a><a href="#id64"><span class="problematic" id="id65">`</span></a>js
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>css: {</dt>
<dd><p class="first">files: &#8216;<a href="#id66"><span class="problematic" id="id67">**</span></a>/<a href="#id68"><span class="problematic" id="id69">*</span></a>.sass&#8217;,
tasks: [&#8216;sass&#8217;],
options: {</p>
<blockquote>
<div><dl class="docutils">
<dt>livereload: {</dt>
<dd>port: 9000,
key: grunt.file.read(&#8216;path/to/ssl.key&#8217;),
cert: grunt.file.read(&#8216;path/to/ssl.crt&#8217;)
// you can pass in any other options you&#8217;d like to the https server, as listed here: <a class="reference external" href="http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener">http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener</a></dd>
</dl>
<p>}</p>
</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id70">
<h1>},<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h1>
<p>#### options.cwd
Type: <cite>String|Object</cite>
Default: <cite>process.cwd()</cite></p>
<p>Ability to set the current working directory. Defaults to <cite>process.cwd()</cite>. Can either be a string to set the cwd to match files and spawn tasks. Or an object to set each independently. Such as <cite>options: { cwd: { files: &#8216;match/files/from/here&#8217;, spawn: &#8216;but/spawn/files/from/here&#8217; } }</cite>.</p>
<p>#### options.livereloadOnError
Type: <cite>Boolean</cite>
Default: <cite>true</cite></p>
<p>Option to prevent the livereload if the executed tasks encountered an error.  If set to <cite>false</cite>, the livereload will only be triggered if all tasks completed successfully.</p>
<p>### Examples</p>
<p><a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a>js
// Simple config to run jshint any time a file is added, changed or deleted
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>watch: {</dt>
<dd>files: [&#8216;<a href="#id75"><span class="problematic" id="id76">**</span></a>/<a href="#id77"><span class="problematic" id="id78">*</span></a>&#8216;],
tasks: [&#8216;jshint&#8217;],</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id79">
<h1>});<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h1>
<p><a href="#id80"><span class="problematic" id="id81">``</span></a><a href="#id82"><span class="problematic" id="id83">`</span></a>js
// Advanced config. Run specific tasks when specific files are added, changed or deleted.
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>watch: {</dt>
<dd><dl class="first docutils">
<dt>gruntfile: {</dt>
<dd>files: &#8216;Gruntfile.js&#8217;,
tasks: [&#8216;jshint:gruntfile&#8217;],</dd>
</dl>
<p>},
src: {</p>
<blockquote>
<div>files: [&#8216;lib/<em>.js&#8217;, &#8216;css/*</em>/<a href="#id84"><span class="problematic" id="id85">*</span></a>.scss&#8217;, &#8216;!lib/dontwatch.js&#8217;],
tasks: [&#8216;default&#8217;],</div></blockquote>
<p>},
test: {</p>
<blockquote>
<div>files: &#8216;&lt;%= jshint.test.src %&gt;&#8217;,
tasks: [&#8216;jshint:test&#8217;, &#8216;qunit&#8217;],</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id86">
<h1>});<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h1>
<p>#### Using the <cite>watch</cite> event
This task will emit a <cite>watch</cite> event when watched files are modified. This is useful if you would like a simple notification when files are edited or if you&#8217;re using this task in tandem with another task. Here is a simple example using the <cite>watch</cite> event:</p>
<p><a href="#id87"><span class="problematic" id="id88">``</span></a><a href="#id89"><span class="problematic" id="id90">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>watch: {</dt>
<dd><dl class="first docutils">
<dt>scripts: {</dt>
<dd>files: [&#8216;lib/<a href="#id91"><span class="problematic" id="id92">*</span></a>.js&#8217;],</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
<p>});
grunt.event.on(&#8216;watch&#8217;, function(action, filepath, target) {</p>
<blockquote>
<div>grunt.log.writeln(target + &#8216;: &#8216; + filepath + &#8216; has &#8216; + action);</div></blockquote>
</div>
<div class="section" id="id93">
<h1>});<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h1>
<p><strong>The `watch` event is not intended for replacing the standard Grunt API for configuring and running tasks. If you&#8217;re trying to run tasks from within the `watch` event you&#8217;re more than likely doing it wrong. Please read [configuring tasks](http://gruntjs.com/configuring-tasks).</strong></p>
<p>##### Compiling Files As Needed
A very common request is to only compile files as needed. Here is an example that will only lint changed files with the <cite>jshint</cite> task:</p>
<p><a href="#id94"><span class="problematic" id="id95">``</span></a><a href="#id96"><span class="problematic" id="id97">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>watch: {</dt>
<dd><dl class="first docutils">
<dt>scripts: {</dt>
<dd><p class="first">files: [&#8216;lib/<a href="#id98"><span class="problematic" id="id99">*</span></a>.js&#8217;],
tasks: [&#8216;jshint&#8217;],
options: {</p>
<blockquote>
<div>spawn: false,</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},
jshint: {</p>
<blockquote>
<div><dl class="docutils">
<dt>all: {</dt>
<dd>src: [&#8216;lib/<a href="#id100"><span class="problematic" id="id101">*</span></a>.js&#8217;],</dd>
</dl>
<p>},</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<p>});</p>
<p>// on watch events configure jshint:all to only run on changed file
grunt.event.on(&#8216;watch&#8217;, function(action, filepath) {</p>
<blockquote>
<div>grunt.config(&#8216;jshint.all.src&#8217;, filepath);</div></blockquote>
</div>
<div class="section" id="id102">
<h1>});<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h1>
<p>If you need to dynamically modify your config, the <cite>spawn</cite> option must be disabled to keep the watch running under the same context.</p>
<p>If you save multiple files simultaneously you may opt for a more robust method:</p>
<p><a href="#id103"><span class="problematic" id="id104">``</span></a><a href="#id105"><span class="problematic" id="id106">`</span></a>js
var changedFiles = Object.create(null);
var onChange = grunt.util._.debounce(function() {</p>
<blockquote>
<div>grunt.config(&#8216;jshint.all.src&#8217;, Object.keys(changedFiles));
changedFiles = Object.create(null);</div></blockquote>
<p>}, 200);
grunt.event.on(&#8216;watch&#8217;, function(action, filepath) {</p>
<blockquote>
<div>changedFiles[filepath] = action;
onChange();</div></blockquote>
</div>
<div class="section" id="id107">
<h1>});<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h1>
<p>#### Live Reloading
Live reloading is built into the watch task. Set the option <cite>livereload</cite> to <cite>true</cite> to enable on the default port <cite>35729</cite> or set to a custom port: <cite>livereload: 1337</cite>.</p>
<p>The simplest way to add live reloading to all your watch targets is by setting <cite>livereload</cite> to <cite>true</cite> at the task level. This will run a single live reload server and trigger the live reload for all your watch targets:</p>
<p><a href="#id108"><span class="problematic" id="id109">``</span></a><a href="#id110"><span class="problematic" id="id111">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>watch: {</dt>
<dd><dl class="first docutils">
<dt>options: {</dt>
<dd>livereload: true,</dd>
</dl>
<p>},
css: {</p>
<blockquote>
<div>files: [&#8216;public/scss/<a href="#id112"><span class="problematic" id="id113">*</span></a>.scss&#8217;],
tasks: [&#8216;compass&#8217;],</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id114">
<h1>});<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h1>
<p>You can also configure live reload for individual watch targets or run multiple live reload servers. Just be sure if you&#8217;re starting multiple servers they operate on different ports:</p>
<p><a href="#id115"><span class="problematic" id="id116">``</span></a><a href="#id117"><span class="problematic" id="id118">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>watch: {</dt>
<dd><dl class="first docutils">
<dt>css: {</dt>
<dd><p class="first">files: [&#8216;public/scss/<a href="#id119"><span class="problematic" id="id120">*</span></a>.scss&#8217;],
tasks: [&#8216;compass&#8217;],
options: {</p>
<blockquote>
<div>// Start a live reload server on the default port 35729
livereload: true,</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},
another: {</p>
<blockquote>
<div><p>files: [&#8216;lib/<a href="#id121"><span class="problematic" id="id122">*</span></a>.js&#8217;],
tasks: [&#8216;anothertask&#8217;],
options: {</p>
<blockquote>
<div>// Start another live reload server on port 1337
livereload: 1337,</div></blockquote>
<p>},</p>
</div></blockquote>
<p>},
dont: {</p>
<blockquote>
<div>files: [&#8216;other/stuff/<a href="#id123"><span class="problematic" id="id124">*</span></a>&#8216;],
tasks: [&#8216;dostuff&#8217;],</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id125">
<h1>});<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h1>
<p>##### Enabling Live Reload in Your HTML
Once you&#8217;ve started a live reload server you&#8217;ll be able to access the live reload script. To enable live reload on your page, add a script tag before your closing <cite>&lt;/body&gt;</cite> tag pointing to the <cite>livereload.js</cite> script:</p>
<p><code class="docutils literal"><span class="pre">`html</span>
<span class="pre">&lt;script</span> <span class="pre">src=&quot;//localhost:35729/livereload.js&quot;&gt;&lt;/script&gt;</span>
<span class="pre">`</span></code></p>
<p>Feel free to add this script to your template situation and toggle with some sort of <cite>dev</cite> flag.</p>
<p>##### Using Live Reload with the Browser Extension
Instead of adding a script tag to your page, you can live reload your page by installing a browser extension. Please visit [how do I install and use the browser extensions](<a class="reference external" href="http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions">http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions</a>-) for help installing an extension for your browser.</p>
<p>Once installed please use the default live reload port <cite>35729</cite> and the browser extension will automatically reload your page without needing the <cite>&lt;script&gt;</cite> tag.</p>
<p>##### Using Connect Middleware
Since live reloading is used when developing, you may want to disable building for production (and are not using the browser extension). One method is to use Connect middleware to inject the script tag into your page. Try the [connect-livereload](<a class="reference external" href="https://github.com/intesso/connect-livereload">https://github.com/intesso/connect-livereload</a>) middleware for injecting the live reload script into your page.</p>
<p>##### Rolling Your Own Live Reload
Live reloading is made easy by the library [tiny-lr](<a class="reference external" href="https://github.com/mklabs/tiny-lr">https://github.com/mklabs/tiny-lr</a>). It is encouraged to read the documentation for <cite>tiny-lr</cite>. If you would like to trigger the live reload server yourself, simply POST files to the URL: <cite>http://localhost:35729/changed</cite>. Or if you rather roll your own live reload implementation use the following example:</p>
<p><a href="#id126"><span class="problematic" id="id127">``</span></a><a href="#id128"><span class="problematic" id="id129">`</span></a>js
// Create a live reload server instance
var lrserver = require(&#8216;tiny-lr&#8217;)();</p>
<p>// Listen on port 35729
lrserver.listen(35729, function(err) { console.log(&#8216;LR Server Started&#8217;); });</p>
<p>// Then later trigger files or POST to localhost:35729/changed
lrserver.changed({body:{files:[&#8216;public/css/changed.css&#8217;]}});
<a href="#id130"><span class="problematic" id="id131">``</span></a><a href="#id132"><span class="problematic" id="id133">`</span></a></p>
<p>##### Live Reload with Preprocessors
Any time a watched file is edited with the <cite>livereload</cite> option enabled, the file will be sent to the live reload server. Some edited files you may desire to have sent to the live reload server, such as when preprocessing (<cite>sass</cite>, <cite>less</cite>, <cite>coffeescript</cite>, etc). As any file not recognized will reload the entire page as opposed to just the <cite>css</cite> or <cite>javascript</cite>.</p>
<p>The solution is to point a <cite>livereload</cite> watch target to your destination files:</p>
<p><a href="#id134"><span class="problematic" id="id135">``</span></a><a href="#id136"><span class="problematic" id="id137">`</span></a>js
grunt.initConfig({</p>
<blockquote>
<div><dl class="docutils">
<dt>sass: {</dt>
<dd><dl class="first docutils">
<dt>dev: {</dt>
<dd>src: [&#8216;src/sass/<a href="#id138"><span class="problematic" id="id139">*</span></a>.sass&#8217;],
dest: &#8216;dest/css/index.css&#8217;,</dd>
</dl>
<p class="last">},</p>
</dd>
</dl>
<p>},
watch: {</p>
<blockquote>
<div><dl class="docutils">
<dt>sass: {</dt>
<dd>// We watch and compile sass files as normal but don&#8217;t live reload here
files: [&#8216;src/sass/<a href="#id140"><span class="problematic" id="id141">*</span></a>.sass&#8217;],
tasks: [&#8216;sass&#8217;],</dd>
</dl>
<p>},
livereload: {</p>
<blockquote>
<div>// Here we watch the files the sass task will compile to
// These files are sent to the live reload server after sass compiles to them
options: { livereload: true },
files: [&#8216;dest/<a href="#id142"><span class="problematic" id="id143">**</span></a>/<a href="#id144"><span class="problematic" id="id145">*</span></a>&#8216;],</div></blockquote>
<p>},</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
</div>
<div class="section" id="id146">
<h1>});<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h1>
<p>### FAQs</p>
<p>#### How do I fix the error <cite>EMFILE: Too many opened files.</cite>?
This is because of your system&#8217;s max opened file limit. For OSX the default is very low (256). Temporarily increase your limit with <cite>ulimit -n 10480</cite>, the number being the new max limit.</p>
<p>In some versions of OSX the above solution doesn&#8217;t work. In that case try <a href="#id147"><span class="problematic" id="id148">`</span></a>launchctl limit maxfiles 10480 10480 ` and restart your terminal. See [here](<a class="reference external" href="http://superuser.com/questions/261023/how-to-change-default-ulimit-values-in-mac-os-x-10-6">http://superuser.com/questions/261023/how-to-change-default-ulimit-values-in-mac-os-x-10-6</a>).</p>
<p>#### Can I use this with Grunt v0.3?
<cite>grunt-contrib-watch&#64;0.1.x</cite> is compatible with Grunt v0.3 but it is highly recommended to upgrade Grunt instead.</p>
<p>#### Why is the watch devouring all my memory/cpu?
Likely because of an enthusiastic pattern trying to watch thousands of files. Such as <cite>&#8216;**/*.js&#8217;</cite> but forgetting to exclude the <cite>node_modules</cite> folder with <cite>&#8216;!**/node_modules/**&#8217;</cite>. Try grouping your files within a subfolder or be more explicit with your file matching pattern.</p>
<p>Another reason if you&#8217;re watching a large number of files could be the low default <cite>interval</cite>. Try increasing with <cite>options: { interval: 5007 }</cite>. Please see issues [#35](<a class="reference external" href="https://github.com/gruntjs/grunt-contrib-watch/issues/145">https://github.com/gruntjs/grunt-contrib-watch/issues/145</a>) and [#145](<a class="reference external" href="https://github.com/gruntjs/grunt-contrib-watch/issues/145">https://github.com/gruntjs/grunt-contrib-watch/issues/145</a>) for more information.</p>
<p>#### Why spawn as child processes as a default?
The goal of this watch task is as files are changed, run tasks as if they were triggered by the user themself. Each time a user runs <cite>grunt</cite> a process is spawned and tasks are ran in succession. In an effort to keep the experience consistent and continually produce expected results, this watch task spawns tasks as child processes by default.</p>
<p>Sandboxing task runs also allows this watch task to run more stable over long periods of time. As well as more efficiently with more complex tasks and file structures.</p>
<p>Spawning does cause a performance hit (usually 500ms for most environments). It also cripples tasks that rely on the watch task to share the context with each subsequent run (i.e., reload tasks). If you would like a faster watch task or need to share the context please set the <cite>spawn</cite> option to <cite>false</cite>. Just be aware that with this option enabled, the watch task is more prone to failure.</p>
<p>## Release History</p>
<blockquote>
<div><ul class="simple">
<li>2014-03-19   v0.6.1   Fix for watch targets named &#8220;default&#8221;</li>
<li>2014-03-11   v0.6.0   Clear changed files after triggering live reload to ensure they&#8217;re only triggered once. cwd option now accepts separate settings for files and spawn. Fix to make interrupt work more than once. Enable live reload over HTTPS. Print newline after initial &#8216;Waiting...&#8217; Remove deprecated grunt.util libs Add reload option to specify files other than Gruntfile files to reload. Update to <a class="reference external" href="mailto:gaze&#37;&#52;&#48;0&#46;5&#46;1">gaze<span>&#64;</span>0<span>&#46;</span>5<span>&#46;</span>1</a> Use fork of tiny-lr (which has quiter operation, support for HTTPS and windows path fixes) Add livereloadOnError, which if set to false will not trigger live reload if there is an error.</li>
<li>2013-08-25   v0.5.3   Fixed for live reload missing files.</li>
<li>2013-08-16   v0.5.2   Fixed issue running tasks after gruntfile is reloaded. Ignores empty file paths.</li>
<li>2013-07-20   v0.5.1   Fixed issue with options resetting.</li>
<li>2013-07-18   v0.5.0   Added target name to watch event. Added atBegin option to run tasks when watcher starts. Changed nospawn option to spawn (nospawn still available for backwards compatibility). Moved libs/vars into top scope to prevent re-init. Bumped Gaze version to ~0.4. Re-grab task/target options upon each task run. Add dateFormat option to override the date/time output upon completion.</li>
<li>2013-05-27   v0.4.4   Remove gracefully closing SIGINT. Not needed and causes problems for Windows. Ensure tasks are an array to not conflict with cliArgs.</li>
<li>2013-05-11   v0.4.3   Only group changed files per target to send correct files to live reload.</li>
<li>2013-05-09   v0.4.2   Fix for closing watchers.</li>
<li>2013-05-09   v0.4.1   Removed &#8220;beep&#8221; notification. Tasks now optional with livereload option. Reverted &#8220;run again&#8221; with interrupt off to fix infinite recursion issue. Watchers now close more properly on task run.</li>
<li>2013-05-03   v0.4.0   Option livereload to start live reload servers. Will reload a Gruntfile before running tasks if Gruntfile is modified. Option event to only trigger watch on certain events. Refactor watch task into separate task runs per target. Option forever to override grunt.fatal/warn to help keeping the watch alive with nospawn enabled. Emit a beep upon complete. Logs all watched files with verbose flag set. If interrupt is off, will run the tasks once more if watch triggered during a previous task run. tasks property is optional for use with watch event. Watchers properly closed when exiting.</li>
<li>2013-02-28   v0.3.1   Fix for top level options.</li>
<li>2013-02-27   v0.3.0   nospawn option added to run tasks without spawning as child processes. Watch emits &#8216;watch&#8217; events upon files being triggered with grunt.event. Completion time in seconds and date/time shown after tasks ran. Negate file patterns fixed. Tasks debounced individually to handle simultaneous triggering for multiple targets. Errors handled better and viewable with &#8211;stack cli option. Code complexity reduced making the watch task code easier to read.</li>
<li>2013-02-15   v0.2.0   First official release for Grunt 0.4.0.</li>
<li>2013-01-18   v0.2.0rc7   Updating grunt/gruntplugin dependencies to rc6. Changing in-development grunt/gruntplugin dependency versions from tilde version ranges to specific versions.</li>
<li>2013-01-09   v0.2.0rc5   Updating to work with grunt v0.4.0rc5.</li>
<li>2012-12-15   v0.2.0a   Conversion to grunt v0.4 conventions. Remove node v0.6 and grunt v0.3 support. Allow watch task to be renamed. Use grunt.util.spawn &#8220;grunt&#8221; option. Updated to <a class="reference external" href="mailto:gaze&#37;&#52;&#48;0&#46;3&#46;0">gaze<span>&#64;</span>0<span>&#46;</span>3<span>&#46;</span>0</a>, forceWatchMethod option removed.</li>
<li>2012-11-01   v0.1.4   Prevent watch from spawning duplicate watch tasks</li>
<li>2012-10-28   v0.1.3   Better method to spawn the grunt bin Bump gaze to v0.2.0. Better handles some events and new option forceWatchMethod Only support Node.js &gt;= v0.8</li>
<li>2012-10-17   v0.1.2   Only spawn a process per task one at a time Add interrupt option to cancel previous spawned process Grunt v0.3 compatibility changes</li>
<li>2012-10-16   v0.1.1   Fallback to global grunt bin if local doesnt exist. Fatal if bin cannot be found Update to gaze 0.1.6</li>
<li>2012-10-08   v0.1.0   Release watch task Remove spawn from helper Run on Grunt v0.4</li>
</ul>
</div></blockquote>
<p>&#8212;</p>
<p>Task submitted by [Kyle Robinson Young](<a class="reference external" href="http://dontkry.com">http://dontkry.com</a>)</p>
<p><em>This file was generated on Wed Mar 19 2014 13:09:11.</em></p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright © NFLabs. All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>